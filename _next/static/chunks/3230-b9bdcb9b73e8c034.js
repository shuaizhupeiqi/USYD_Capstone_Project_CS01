"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3230],{19426:function(t,e,s){var i=s(85893),n=s(67294),r=s(11163),a=s(46409),o=s(4480),l=s(81921);let h=(0,o.cn)({key:"loadingState",default:!0}),c=(0,o.cn)({key:"supportedLanguagesState",default:[]}),u=(0,o.cn)({key:"defaultLanguageState",default:"English"}),d=(0,o.nZ)({key:"languagesForSelect",get:t=>{let{get:e}=t,s=e(c);return s.map(t=>({key:t.language,label:t.label,value:t.language}))}});e.ZP=(0,r.withRouter)((0,l.O)(function(t){var e;let[s,r]=(0,o.FV)(h),l=(0,o.Zl)(c),[p,b]=(0,o.FV)(u),g=(0,o.sJ)(d);(0,n.useEffect)(()=>{!async function(){let{languageHelper:e}=t,s=await e.loadSupoortLanguage();l(s.supported),b(s.default),r(!1)}()},[t,l,b,r]);let S=e=>{let{languageHelper:s}=t;s.changeLanguage(e)};return s?(0,i.jsx)("div",{}):(0,i.jsx)("div",{children:(0,i.jsx)(a.Z,{showSearch:!0,style:{width:"100%"},placeholder:"Select a Language",optionFilterProp:"children",onChange:S,defaultValue:p,filterOption:(t,s)=>(null!==(e=null==s?void 0:s.label)&&void 0!==e?e:"").toLowerCase().includes(t.toLowerCase()),options:g})})}))},39960:function(t,e,s){var i=s(54689);let n=(t,e,s)=>{i.Z[t]({message:e,description:s})};e.Z=n},51146:function(t,e,s){var i=s(67573),n=s(85893),r=s(67294),a=s(11163),o=s(81921),l=s(24688),h=s(46409),c=s(96074),u=s(86738),d=s(71577),p=s(71230),b=s(83062),g=s(26713),S=s(79531),f=s(15746),m=s(85813),x=s(2453),y=s(3253),P=s(63606),Z=s(97937),D=s(86548),j=s(16397);s(19996);var v=s(75884),w=s(39960),A=s(37744);let{Text:N}=l.Z,{Option:T}=h.Z;class C extends r.Component{async componentDidMount(){await this.loadTranslation(),await this.loadData()}async loadTranslation(){let{languageHelper:t}=this.props,e=await t.translation("Profile",!0);this.setState({translation:e.translation})}async loadData(){let t=await (0,v.b)();if(t){let e=await (0,A.xK)("users/".concat(t.uid)),s=null==e?void 0:e.emailSubscription,i=null==e?void 0:e.phoneNumber,n=null==e?void 0:e.phoneSubscription;void 0==s&&(s=!1),this.setState({user:t,emailSubscription:s,loading:!1,emailVerified:t.emailVerified,phoneNumber:i,phoneSubscription:n})}else(0,w.Z)("error",this.state.translation.Alert.Error.SomethingWentWrongTitle,this.state.translation.Alert.Error.FetchingProfile)}renderSignOutButton(){return(0,n.jsx)(c.Z,{orientation:"right",children:(0,n.jsx)(u.Z,{title:this.state.translation.SignOutConfirmTitle,description:this.state.translation.SignOutConfirmDescription,okText:this.state.translation.SignOutOkText,cancelText:this.state.translation.SignOutCancelText,onConfirm:this.doSignOut,children:(0,n.jsx)(d.ZP,{style:{backgroundColor:j.MA[6],color:j.MA[1],fontWeight:"bold"},icon:(0,n.jsx)(y.Z,{}),children:this.state.translation.SignOut})})})}renderUserNameDisplay(){let t=this.state.user;return t?(0,n.jsx)("div",{children:(0,n.jsxs)("p",{style:{fontSize:"18px"},children:[(0,n.jsxs)("strong",{children:[this.state.translation.UserName,":"]})," ",t.displayName]})}):null}renderEmailDisplay(){return(0,n.jsxs)(p.Z,{style:{width:"100%",display:"flex",textAlign:"center",justifyContent:"left",alignItems:"center"},children:[(0,n.jsxs)("p",{style:{fontSize:"18px"},children:[(0,n.jsxs)("strong",{children:[this.state.translation.Email,":"]})," ",this.state.user.email," "]}),(0,n.jsx)(b.Z,{title:this.state.translation.VerificationStatus,children:(0,n.jsx)("div",{onClick:this.infoWhetherIsVerified,style:{marginLeft:"2%",width:"20px",height:"20px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:j.MA[1],backgroundColor:this.state.emailVerified?j.ek[7]:j.b_[7],cursor:"pointer"},children:this.state.emailVerified?(0,n.jsx)(P.Z,{style:{fontSize:"10px"}}):(0,n.jsx)(Z.Z,{style:{fontSize:"10px"}})})})]})}renderManageSubscriptionsDisplay(){let t=this.state.emailSubscription,e={fontSize:"18px"},s={cursor:"pointer",textDecoration:"underline",color:j.iN[6]};return this.state.emailVerified?(0,n.jsx)("div",{children:t?(0,n.jsxs)("p",{style:{...e,fontSize:"15px"},children:[this.state.translation.YouAreSubscibed,"  "," ",(0,n.jsx)(u.Z,{title:this.state.translation.Unsubscribe,okText:this.state.translation.Confirm,cancelText:this.state.translation.Cancel,onConfirm:this.doUnSubscribe,children:(0,n.jsx)(N,{style:s,children:this.state.translation.Unsubscribe})})]}):(0,n.jsxs)("p",{style:{...e,fontSize:"15px"},children:[this.state.translation.WouldYouLikeToSubscribe,"  "," ",(0,n.jsx)(u.Z,{title:this.state.translation.Subscribe,okText:this.state.translation.Confirm,cancelText:this.state.translation.Cancel,onConfirm:this.doSubscribe,children:(0,n.jsx)(N,{style:s,children:this.state.translation.Subscribe})})]})}):(0,n.jsx)("div",{children:(0,n.jsx)("p",{children:this.state.translation.HaventVerifyAccountYet})})}renderManagePhoneSubscriptionDisplay(){let t={fontSize:"18px"},e={cursor:"pointer",textDecoration:"underline",color:j.iN[6]};return(0,n.jsx)("div",{children:this.state.phoneSubscription?(0,n.jsx)("div",{children:(0,n.jsxs)("p",{style:{...t,fontSize:"15px"},children:[this.state.translation.YouAreSubscribedForPhone," "," ",(0,n.jsx)(u.Z,{title:this.state.translation.Unsubscribe,okText:this.state.translation.Confirm,cancelText:this.state.translation.Cancel,onConfirm:this.unDoPhoneSubscribe,children:(0,n.jsx)(N,{style:e,children:this.state.translation.Unsubscribe})})]})}):(0,n.jsx)("div",{children:(0,n.jsxs)("p",{style:{...t,fontSize:"15px"},children:[this.state.translation.WouldYouLikeSMSNotification," "," ",(0,n.jsx)(u.Z,{title:this.state.translation.Subscribe,okText:this.state.translation.Confirm,cancelText:this.state.translation.Cancel,onConfirm:this.doPhoneSubscribe,children:(0,n.jsx)(N,{style:e,children:this.state.translation.Subscribe})})]})})})}handlePhoneNumberInputKeyPress(t){let e=t.keyCode||t.which,s=String.fromCharCode(e);/\d/.test(s)||t.preventDefault()}renderAddPhoneNumberDisplay(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.translation.NoPhoneFound;return(0,n.jsxs)(g.Z,{style:{width:"100%"},children:[(0,n.jsx)(S.Z,{placeholder:t,addonBefore:(0,n.jsx)(h.Z,{style:{width:70},defaultValue:this.state.startPhoneNumberToBeSubmit,onChange:t=>this.setState({startPhoneNumberToBeSubmit:t}),children:(0,n.jsx)(T,{value:"61",children:"+61"})}),style:{width:"55%"},onKeyPress:this.handlePhoneNumberInputKeyPress,onChange:t=>{this.setState({phoneNumberToBeSubmit:t.target.value})}}),(0,n.jsx)(u.Z,{title:this.state.translation.UpdatePhoneNumber,okText:this.state.translation.Confirm,cancelText:this.state.translation.Cancel,onConfirm:this.updatePhoneNumber,children:(0,n.jsx)(d.ZP,{style:{backgroundColor:j.MA[6],color:j.MA[1],borderColor:j.MA[6]},children:this.state.translation.Save})})]})}renderManagePhoneDisplay(){return this.state.phoneNumber?this.renderManagePhoneSubscriptionDisplay():this.renderAddPhoneNumberDisplay()}noPhoneDisplay(){return(0,n.jsxs)(p.Z,{style:{alignItems:"center"},children:[(0,n.jsx)("div",{children:(0,n.jsx)(l.Z.Text,{strong:!0,style:{fontSize:18},children:this.state.translation.PhoneNumber})}),(0,n.jsx)("div",{onClick:this.infoWhetherInputPhone,style:{marginLeft:"2%",width:"20px",height:"20px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:j.b_[6],color:j.MA[1],cursor:"pointer"},children:(0,n.jsx)(Z.Z,{style:{fontSize:"10px"}})}),this.state.emailVerified?this.renderManagePhoneDisplay():(0,n.jsx)(g.Z,{style:{width:"100%"},children:(0,n.jsx)("div",{style:{textAlign:"left"},children:(0,n.jsx)(l.Z.Text,{type:"warning",children:this.state.translation.HaventVerifyAccountYetPhoneWarning})})})]})}hasPhoneDisplay(){return(0,n.jsxs)(f.Z,{style:{width:"100%",marginBottom:"10px"},children:[(0,n.jsxs)(p.Z,{style:{alignItems:"center",marginBottom:"10px"},children:[(0,n.jsx)("div",{children:(0,n.jsxs)(l.Z.Text,{strong:!0,style:{fontSize:18},children:[this.state.translation.PhoneNumber," ",this.state.phoneNumber]})}),(0,n.jsx)("div",{onClick:this.infoWhetherInputPhone,style:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:j.ek[6],borderRadius:"50%",width:"20px",height:"20px",marginLeft:"10px"},children:(0,n.jsx)(P.Z,{style:{color:j.MA[1],fontSize:"12px"}})}),(0,n.jsx)(D.Z,{style:{cursor:"pointer",fontSize:"20px",marginLeft:"10px",color:j.MA[13]}})]}),this.state.openEditPhone?this.renderAddPhoneNumberDisplay(this.state.phoneNumber.substring(3)):null,this.renderManagePhoneDisplay()]})}renderPhoneDisplay(){return this.state.phoneNumber?this.hasPhoneDisplay():this.noPhoneDisplay()}renderMainView(){return(0,n.jsx)(m.Z,{style:{width:"100%",borderRadius:"10px"},loading:this.state.loading,children:this.state.user&&(0,n.jsxs)("div",{children:[(0,n.jsx)(p.Z,{style:{justifyContent:"flex-end",marginBottom:"10px"},children:(0,n.jsx)("div",{onClick:this.closeProfilePageFromIcon,style:{cursor:"pointer"},children:(0,n.jsx)(Z.Z,{style:{fontSize:"20px",color:j.MA[13]}})})}),(0,n.jsx)(p.Z,{style:{marginBottom:"20px",textAlign:"center"},children:(0,n.jsx)(l.Z.Title,{level:4,children:this.state.translation.ManageProfile})}),(0,n.jsxs)("div",{style:{padding:"0 20px"},children:[this.renderUserNameDisplay(),this.renderEmailDisplay(),this.renderManageSubscriptionsDisplay(),this.renderPhoneDisplay()]}),this.renderSignOutButton()]})})}render(){return(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.3)",backdropFilter:"blur(3px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:this.closeProfilePage,children:this.renderMainView()})}constructor(t){super(t),(0,i.Z)(this,"state",{openEditPhone:!1,startPhoneNumberToBeSubmit:"61",showUnsubscribeDisplay:!1,showSubscribeDisplay:!1,loading:!0,user:null,editPhoneNumber:!1,phoneSubscription:!1}),(0,i.Z)(this,"doSignOut",t=>{this.props.doSignOut()}),(0,i.Z)(this,"closeProfilePage",t=>{t.target===t.currentTarget&&this.props.closeProfilePage()}),(0,i.Z)(this,"closeProfilePageFromIcon",t=>{this.props.closeProfilePage()}),(0,i.Z)(this,"infoWhetherIsVerified",()=>{this.state.emailVerified?x.ZP.success(this.state.translation.EmailHaveBeenVerified):x.ZP.error(this.state.translation.YouHaventVerifiedYet)}),(0,i.Z)(this,"showUnSubscribeDisplay",t=>{let e=this.state.showUnsubscribeDisplay;this.setState({showUnsubscribeDisplay:!e})}),(0,i.Z)(this,"showSubscribeDisplay",t=>{let e=this.state.showSubscribeDisplay;this.setState({showSubscribeDisplay:!e})}),(0,i.Z)(this,"cancelShowUnSubscribeDisplay",t=>{this.setState({showUnsubscribeDisplay:!1})}),(0,i.Z)(this,"cancelShowSubscribeDisplay",t=>{this.setState({showSubscribeDisplay:!1})}),(0,i.Z)(this,"doUnSubscribe",async()=>{let t=await (0,v.b)();t&&(0,A.pN)("users/".concat(t.uid),{emailSubscription:!1}).then(()=>{console.log("Operation successful"),(0,w.Z)("success",this.state.translation.Alert.Success.UnsubscribeTitle,this.state.translation.Alert.Success.UnsubscribeDescription+t.email),this.setState({showUnsubscribeDisplay:!1}),this.loadData()}).catch(t=>{console.error("Operation failed:",t),this.setState({showUnsubscribeDisplay:!1}),(0,w.Z)("error",this.state.translation.Alert.Error.SomethingWentWrongTitle,this.state.translation.Alert.Error.SaveDataErrorDescription)})}),(0,i.Z)(this,"doSubscribe",async()=>{console.log("do subscribe");let t=await (0,v.b)();t&&(0,A.pN)("users/".concat(t.uid),{emailSubscription:!0}).then(()=>{console.log("Operation successful"),(0,w.Z)("success",this.state.translation.Alert.Success.SubscribeTitle,this.state.translation.Alert.Success.SubsribeDescription+t.email),this.setState({showSubscribeDisplay:!1}),this.loadData()}).catch(t=>{console.error("Operation failed:",t),this.setState({showSubscribeDisplay:!1}),(0,w.Z)("error",this.state.translation.Alert.Error.SomethingWentWrongTitle,this.state.translation.Alert.Error.SaveDataErrorDescription)})}),(0,i.Z)(this,"infoWhetherInputPhone",()=>{this.state.phoneNumber?x.ZP.success("You have successfully logged your phone."):x.ZP.error("You haven't log your phone number yet.")}),(0,i.Z)(this,"doPhoneSubscribe",async()=>{console.log("do phone subscribe");let t=await (0,v.b)();t&&(0,A.pN)("users/".concat(t.uid),{phoneSubscription:!0}).then(()=>{console.log("Operation successful"),(0,w.Z)("success",this.state.translation.Alert.Success.SubscribeTitle,this.state.translation.Alert.Success.SubscribePhoneDesctiption+this.state.phoneNumber),this.loadData()}).catch(t=>{console.error("Operation failed:",t),this.setState({showSubscribeDisplay:!1}),(0,w.Z)("error",this.state.translation.Alert.Error.SomethingWentWrongTitle,this.state.translation.Alert.Error.SaveDataErrorDescription)})}),(0,i.Z)(this,"unDoPhoneSubscribe",async()=>{console.log("undo phone subscribe");let t=await (0,v.b)();t&&(0,A.pN)("users/".concat(t.uid),{phoneSubscription:!1}).then(()=>{console.log("Operation successful"),(0,w.Z)("success",this.state.translation.Alert.Success.UnsubscribeTitle,this.state.translation.Alert.Success.UnsubscribePhoneDesctiption+this.state.phoneNumber),this.loadData()}).catch(t=>{console.error("Operation failed:",t),this.setState({showSubscribeDisplay:!1}),(0,w.Z)("error",this.state.translation.Alert.Error.SomethingWentWrongTitle,this.state.translation.Alert.Error.SaveDataErrorDescription)})}),(0,i.Z)(this,"updatePhoneNumber",async t=>{if(this.state.startPhoneNumberToBeSubmit&&this.state.phoneNumberToBeSubmit){let t=this.state.startPhoneNumberToBeSubmit+this.state.phoneNumberToBeSubmit,e=/^\d{11}$/.test(t);if(e){if(this.state.phoneNumber!=="+"+t){console.log("Phone number is valid.");let e=await (0,v.b)();e?(0,A.pN)("users/".concat(e.uid),{phoneNumber:"+"+t}).then(()=>{console.log("Operation successful"),(0,w.Z)("success",this.state.translation.Alert.Success.UpdatePhoneSuccessTitle,this.state.translation.Alert.Success.UpdatePhoneSuccessTitle+": "+t),this.setState({openEditPhone:!1}),this.loadData()}).catch(t=>{console.error("Operation failed:",t),(0,w.Z)("error",this.state.translation.Alert.Error.SomethingWentWrongTitle,this.state.translation.Alert.Error.SaveDataErrorDescription)}):(0,w.Z)("error",this.state.translation.Alert.Error.SomethingWentWrongTitle,this.state.translation.Alert.Error.SomethingWentWrongTitle)}else console.log("Duplicate phone number"),(0,w.Z)("error",this.state.translation.Alert.Error.DuplicatePhoneNumberTitle,this.state.translation.Alert.Error.DuplicatePhoneNumberDescription)}else console.log("Phone number is invalid."),(0,w.Z)("error",this.state.translation.Alert.Error.SomethingWentWrongTitle,this.state.translation.Alert.Error.InvalidPhoneNumber)}}),(0,i.Z)(this,"openEditPhone",()=>{let t=this.state.openEditPhone;this.setState({openEditPhone:!t})})}}e.Z=(0,a.withRouter)((0,o.O)(C))},75884:function(t,e,s){s.d(e,{a:function(){return n},b:function(){return r}});var i=s(44866);s(88522),s(48562),i.Z.initializeApp({apiKey:"AIzaSyDGbDncnE8u9TuFfzOBWqYasgeDmKaSrSE",authDomain:"hss-application.firebaseapp.com",projectId:"hss-application",storageBucket:"hss-application.appspot.com",messagingSenderId:"124675882675",appId:"1:124675882675:web:7b389a2a209de8da2efac6",measurementId:"G-JT6FHMP7DN"});let n=t=>{i.Z.auth().onAuthStateChanged(function(e){e?t(!0,e):t(!1,null)})},r=async()=>new Promise((t,e)=>{i.Z.auth().onAuthStateChanged(e=>{e?t(e):t(void 0)},e)})},37744:function(t,e,s){s.d(e,{pN:function(){return n},xK:function(){return r}});var i=s(61800);function n(t,e){return new Promise(async(s,n)=>{try{let r=i.Fs.ref(t),a=await r.once("value"),o=a.val();(!o||o&&void 0===o.emailSubscription)&&r.child("emailSubscription").set(!0,t=>{t?(console.error("Error updating emailSubscription:",t),n(t)):console.log("emailSubscription updated successfully")}),r.update(e,t=>{t?(console.error("Error creating or updating data:",t),n(t)):s()})}catch(t){console.error("Error creating or updating data:",t),n(t)}})}function r(t){return new Promise((e,s)=>{try{let n=i.Fs.ref(t);n.once("value",t=>{let s=t.val();e(s)},t=>{console.error("Error reading data:",t),s(t)})}catch(t){console.error("Error reading data:",t),s(t)}})}},61800:function(t,e,s){s.d(e,{Fs:function(){return n},wm:function(){return r}});var i=s(44866);s(68542),s(46282),s(67058),s(79865),i.Z.initializeApp({apiKey:"AIzaSyDGbDncnE8u9TuFfzOBWqYasgeDmKaSrSE",authDomain:"hss-application.firebaseapp.com",projectId:"hss-application",storageBucket:"hss-application.appspot.com",messagingSenderId:"124675882675",appId:"1:124675882675:web:7b389a2a209de8da2efac6",measurementId:"G-JT6FHMP7DN"}),i.Z.storage(),i.Z.firestore();let n=i.Z.database(),r=t=>{{let e=i.Z.analytics();Object.entries(t).forEach(t=>{let[s,i]=t;e.logEvent("input_change",{field_name:s,field_value:i})})}}},83005:function(t,e,s){s.d(e,{y:function(){return i}});let i=()=>{let t=localStorage.getItem("allValue");t=t?JSON.parse(t):[];let e=null==t?void 0:t.find(t=>null==t?void 0:t.check);return e||null}}}]);