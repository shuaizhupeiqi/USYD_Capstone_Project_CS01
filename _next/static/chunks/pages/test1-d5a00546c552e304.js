(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1417,7129],{88902:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/test1",function(){return a(90487)}])},20800:function(e,t,a){"use strict";a.d(t,{Z:function(){return $}});var o=a(85893),l=a(71230),s=a(15746),r=a(97937),i=a(94184),n=a.n(i),c=a(67294),d=a(53124),u=a(98787),p=a(45353),h=a(67968),m=a(45503),g=a(63443),f=a(14747);let b=(e,t,a)=>{let o=function(e){if("string"!=typeof e)return e;let t=e.charAt(0).toUpperCase()+e.slice(1);return t}(a);return{[`${e.componentCls}-${t}`]:{color:e[`color${a}`],background:e[`color${o}Bg`],borderColor:e[`color${o}Border`]}}},y=e=>(0,g.j)(e,(t,a)=>{let{textColor:o,lightBorderColor:l,lightColor:s,darkColor:r}=a;return{[`${e.componentCls}-${t}`]:{color:o,background:s,borderColor:l,"&-inverse":{color:e.colorTextLightSolid,background:r,borderColor:r}}}}),v=e=>{let{paddingXXS:t,lineWidth:a,tagPaddingHorizontal:o,componentCls:l}=e,s=o-a;return{[l]:Object.assign(Object.assign({},(0,f.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:s,fontSize:e.tagFontSize,lineHeight:`${e.tagLineHeight}px`,whiteSpace:"nowrap",background:e.tagDefaultBg,border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",[`&${l}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.tagDefaultColor},[`${l}-close-icon`]:{marginInlineStart:t-a,color:e.colorTextDescription,fontSize:e.tagIconSize,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${l}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${l}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:s}})}};var k=(0,h.Z)("Tag",e=>{let{fontSize:t,lineHeight:a,lineWidth:o,fontSizeIcon:l}=e,s=e.fontSizeSM,r=e.colorFillAlter,i=e.colorText,n=(0,m.TS)(e,{tagFontSize:s,tagLineHeight:Math.round(t*a)-2*o,tagDefaultBg:r,tagDefaultColor:i,tagIconSize:l-2*o,tagPaddingHorizontal:8});return[v(n),y(n),b(n,"success","Success"),b(n,"processing","Info"),b(n,"error","Error"),b(n,"warning","Warning")]}),w=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)0>t.indexOf(o[l])&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(a[o[l]]=e[o[l]]);return a};let _=e=>{var{prefixCls:t,className:a,checked:o,onChange:l,onClick:s}=e,r=w(e,["prefixCls","className","checked","onChange","onClick"]);let{getPrefixCls:i}=c.useContext(d.E_),u=e=>{null==l||l(!o),null==s||s(e)},p=i("tag",t),[h,m]=k(p),g=n()(p,{[`${p}-checkable`]:!0,[`${p}-checkable-checked`]:o},a,m);return h(c.createElement("span",Object.assign({},r,{className:g,onClick:u})))};var x=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)0>t.indexOf(o[l])&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(a[o[l]]=e[o[l]]);return a};let D=(e,t)=>{var{prefixCls:a,className:o,rootClassName:l,style:s,children:i,icon:h,color:m,onClose:g,closeIcon:f,closable:b=!1}=e,y=x(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable"]);let{getPrefixCls:v,direction:w}=c.useContext(d.E_),[_,D]=c.useState(!0);c.useEffect(()=>{"visible"in y&&D(y.visible)},[y.visible]);let C=(0,u.o2)(m)||(0,u.yT)(m),R=Object.assign({backgroundColor:m&&!C?m:void 0},s),S=v("tag",a),[L,M]=k(S),j=n()(S,{[`${S}-${m}`]:C,[`${S}-has-color`]:m&&!C,[`${S}-hidden`]:!_,[`${S}-rtl`]:"rtl"===w},o,l,M),E=e=>{e.stopPropagation(),null==g||g(e),e.defaultPrevented||D(!1)},H="function"==typeof y.onClick||i&&"a"===i.type,P=h||null,Z=P?c.createElement(c.Fragment,null,P,c.createElement("span",null,i)):i,O=c.createElement("span",Object.assign({},y,{ref:t,className:j,style:R}),Z,b?f?c.createElement("span",{className:`${S}-close-icon`,onClick:E},f):c.createElement(r.Z,{className:`${S}-close-icon`,onClick:E}):null);return L(H?c.createElement(p.Z,null,O):O)},C=c.forwardRef(D);C.CheckableTag=_;var R=a(46409),S=a(71577),L=a(11163),M=a(80882),j=a(81921),E=a(11768),H=a(19996),P=a(25675),Z=a.n(P),O=a(37744),T=a(26743),F=a(75884),N=a(4480);let A=(0,N.cn)({key:"geoDataState",default:null}),V=(0,N.cn)({key:"defaultValueState",default:null}),I=e=>{var t,r,i;let[n,d]=(0,c.useState)(!1),[u,p]=(0,c.useState)(!0),[h,m]=(0,c.useState)([]),[g,f]=(0,c.useState)({LocateMeButtonLabel:"Locate Me",LocationText:"Location",LocationDropdown:"Choose your location"}),[b,y]=(0,N.FV)(A),[v,k]=(0,N.FV)(V);(0,c.useEffect)(()=>(x(),window.addEventListener("resize",w),w(),()=>{window.removeEventListener("resize",w)}),[]);let w=()=>{d(window.innerWidth>864)},_=async(e,t)=>{let a=E.ZP.load("geoData");a?(m(e),p(!1),f(t),k(a.suburb+", "+a.state+", "+a.postcode)):(m(e),p(!1),f(t))},x=async()=>{let t=await e.languageHelper.translation("AddressDropdown"),o=await a.e(4503).then(a.t.bind(a,34503,19)),l=[];for(let e=0;e<o.length;e++){let t=o[e];t.value=t.postcode+"//"+t.suburb+"//"+t.latitude+"//"+t.longitude+"//"+t.state,t.label=t.suburb+", "+t.state+", "+t.postcode,l.push(t)}let s=await (0,F.b)();if(s&&s.emailVerified)try{let e=await (0,O.xK)("users/".concat(s.uid)),a=(0,T.w)(e.geoData);m(l),p(!1),f(t),k(a.suburb+", "+a.state+", "+a.postcode)}catch(e){console.error("Operation failed:",e),_(l,t)}else _(l,t)},D=t=>{let a=t.split("//");k({postcode:a[0],suburb:a[1],latitude:a[2],longitude:a[3],state:a[4]}),e.handleAddressCallBack(a)},L=()=>{e.handleLocateMeCallBack()};return(0,o.jsx)(l.Z,{style:{width:"100%",marginTop:n?"1%":"3%",marginBottom:n?"1%":"3%"},children:u?(0,o.jsx)(H.Z,{}):(0,o.jsxs)(l.Z,{style:{width:"100%",justifyContent:"space-between"},children:[(0,o.jsx)(s.Z,{span:4,children:(0,o.jsx)(C,{style:{width:"98%",display:"flex",alignItems:"center",justifyContent:"center",color:"#000000",backgroundColor:"#ffffff",borderRadius:"6px",fontSize:"smaller",fontWeight:"bold",height:"100%"},children:g.LocationText})}),(0,o.jsx)(s.Z,{span:18,style:{textAlign:"center"},children:(0,o.jsx)(R.Z,{suffixIcon:(0,o.jsx)(M.Z,{}),showSearch:!0,style:{width:"100%"},defaultValue:v,placeholder:"Search to Select",optionFilterProp:"children",filterOption:(e,a)=>(null!==(t=null==a?void 0:a.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase()),filterSort:(e,t)=>(null!==(r=null==e?void 0:e.label)&&void 0!==r?r:"").toLowerCase().localeCompare((null!==(i=null==t?void 0:t.label)&&void 0!==i?i:"").toLowerCase()),options:h,onChange:D.bind(void 0)})}),(0,o.jsx)(s.Z,{span:2,style:{textAlign:"center"},children:(0,o.jsx)(S.ZP,{style:{margin:"auto",width:"90%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},onClick:L.bind(void 0),children:n?(0,o.jsx)("p",{children:g.LocateMeButtonLabel}):(0,o.jsx)(Z(),{src:"/USYD_Capstone_Project_CS01/icons/maps-and-flags.png",alt:"",width:15,height:15})})})]})})};var $=(0,L.withRouter)((0,j.O)(I))},87129:function(e,t,a){"use strict";a.r(t);var o=a(85893),l=a(67294);t.default=function(e){let[t,s]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async function(){let e=(await Promise.all([a.e(9269),a.e(8158)]).then(a.bind(a,98158))).default;s(()=>e)})()},[]),(0,o.jsx)("div",{style:{height:"30vh"},children:t&&(0,o.jsx)(t,{center:e.centerCoordinates,marker:e.markerCoordinates,content:e.content})})}},46982:function(e,t,a){"use strict";var o=a(85893),l=a(36465),s=a.n(l),r=a(67294),i=a(11163),n=a(69400);(0,a(4480).cn)({key:"isModalOpenState",default:!1});let c={maxHeight:"80vh",maxWidth:"90vw",overflowY:"auto",overflowX:"hidden"},d=e=>{let{child:t,content:a}=e,[l,i]=(0,r.useState)(!1),d=e=>{i(!0),console.log("Showing modal"),e.stopPropagation()},u=e=>{i(!1),console.log("Closing modal"),e.stopPropagation()};return(0,o.jsxs)("div",{className:"jsx-28fdcef7af6d039c",children:[(0,o.jsx)(s(),{id:"28fdcef7af6d039c",children:".ant-modal-close-x{margin-right:-20px}.ant-modal-close-x:hover,.ant-modal-close-x:focus{background-color:transparent!important}.ant-modal-close:hover,.ant-modal-close:focus,.ant-modal-close .ant-modal-close-x:hover,.ant-modal-close .ant-modal-close-x:focus{background-color:transparent!important}"}),r.cloneElement(t,{onClick:d}),(0,o.jsx)("div",{onClick:e=>e.stopPropagation(),className:"jsx-28fdcef7af6d039c",children:(0,o.jsx)(n.Z,{footer:null,visible:l,onCancel:u,bodyStyle:c,getContainer:!1,children:a})})]})};t.Z=(0,i.withRouter)(d)},75884:function(e,t,a){"use strict";a.d(t,{a:function(){return l},b:function(){return s}});var o=a(44866);a(88522),a(48562),o.Z.initializeApp({apiKey:"AIzaSyDGbDncnE8u9TuFfzOBWqYasgeDmKaSrSE",authDomain:"hss-application.firebaseapp.com",projectId:"hss-application",storageBucket:"hss-application.appspot.com",messagingSenderId:"124675882675",appId:"1:124675882675:web:7b389a2a209de8da2efac6",measurementId:"G-JT6FHMP7DN"});let l=e=>{o.Z.auth().onAuthStateChanged(function(t){t?e(!0,t):e(!1,null)})},s=async()=>new Promise((e,t)=>{o.Z.auth().onAuthStateChanged(t=>{t?e(t):e(void 0)},t)})},37744:function(e,t,a){"use strict";a.d(t,{pN:function(){return l},xK:function(){return s}});var o=a(61800);function l(e,t){return new Promise(async(a,l)=>{try{let s=o.Fs.ref(e),r=await s.once("value"),i=r.val();(!i||i&&void 0===i.emailSubscription)&&s.child("emailSubscription").set(!0,e=>{e?(console.error("Error updating emailSubscription:",e),l(e)):console.log("emailSubscription updated successfully")}),s.update(t,e=>{e?(console.error("Error creating or updating data:",e),l(e)):a()})}catch(e){console.error("Error creating or updating data:",e),l(e)}})}function s(e){return new Promise((t,a)=>{try{let l=o.Fs.ref(e);l.once("value",e=>{let a=e.val();t(a)},e=>{console.error("Error reading data:",e),a(e)})}catch(e){console.error("Error reading data:",e),a(e)}})}},61800:function(e,t,a){"use strict";a.d(t,{Fs:function(){return l},wm:function(){return s}});var o=a(44866);a(68542),a(46282),a(67058),a(79865),o.Z.initializeApp({apiKey:"AIzaSyDGbDncnE8u9TuFfzOBWqYasgeDmKaSrSE",authDomain:"hss-application.firebaseapp.com",projectId:"hss-application",storageBucket:"hss-application.appspot.com",messagingSenderId:"124675882675",appId:"1:124675882675:web:7b389a2a209de8da2efac6",measurementId:"G-JT6FHMP7DN"}),o.Z.storage(),o.Z.firestore();let l=o.Z.database(),s=e=>{{let t=o.Z.analytics();Object.entries(e).forEach(e=>{let[a,o]=e;t.logEvent("input_change",{field_name:a,field_value:o})})}}},75109:function(e,t,a){"use strict";a.d(t,{ss:function(){return h}});var o=a(26743),l=a(6154),s=a(89174),r=a(75884),i=a(37744),n=a(53714),c=a(83005);let d={Extreme:{backgroundColor:"#BA2011",color:"white",fontWeight:"bold"},High:{backgroundColor:"#ED5711",color:"white",fontWeight:"bold"},Moderate:{backgroundColor:"#FFA600",color:"white",fontWeight:"bold"},Low:{backgroundColor:"#52B795",color:"white",fontWeight:"bold"}};function u(e){let t=1;if(e){let a=(0,o.f)(e,"w");if(a.every(e=>void 0===e))return t;let l=(e,t)=>void 0!==t?e*t:1*e;t=.85*a.reduce(l,1)}return t}async function p(){return new Promise((e,t)=>{(0,r.a)(async(t,a)=>{let l=(0,c.y)();if(t&&a&&a.emailVerified)try{let t=await (0,i.xK)("users/".concat(a.uid));console.log("dataFromFirebase",t);let l=(0,o.w)(t.settings),s=u(l);e(s)}catch(s){console.error("Operation failed:",s);let t=null;l&&(t=(0,o.w)(l));let a=u(t);e(a)}else{let t=null;l&&(t=(0,o.w)(l));let a=u(t);e(a)}})})}async function h(e,t,a){let o=1;try{o=await p()}catch(e){console.error("Error getting wDivider:",e),o=1}let r=(0,n.E)(e.latitude,e.longitude),i=await l.Z.get("https://api.open-meteo.com/v1/forecast",{params:{latitude:e.latitude,longitude:e.longitude,hourly:"temperature_2m,relativehumidity_2m,cloudcover,windspeed_10m",timezone:r,forecast_days:"4"}}),c=i.data.hourly,u=c.temperature_2m,h=c.windspeed_10m,m=c.relativehumidity_2m,g=[];for(let e=0;e<96;e++){let t=e%24,a=(0,s.M3)(u[e],u[e]+20,m[e],.3*h[e],100,1,1).wp/o;a>1&&(a=1),a=parseFloat(a.toFixed(2)),g.push({time:t,riskValue:a,divider:o})}let f=g.slice(0,25),b=[g.slice(t,24),g.slice(24,48),g.slice(48,72),g.slice(72,96)],y=g[t].riskValue,v=[];for(let e of b){let t=function(e){let t=e.reduce((e,t)=>t.riskValue>e.riskValue?t:e),a=t.riskValue,o="Extreme",l=d.Extreme;return a<.75&&(o="High",l=d.High),a<.5&&(o="Moderate",l=d.Moderate),a<.25&&(o="Low",l=d.Low),{maxRiskValue:a,maxRiskLevel:o,style:l,time:t.time}}(e);v.push(t)}let k=v[0].maxRiskValue,w=a.current,_=a.maxLabel,x=[],D=[],C=[],R=[];return y==k?D.push({riskValue:k,y:.5,label:_=a.currentMax}):(x.push({riskValue:y,y:.5,label:w}),D.push({riskValue:k,y:.5,label:_})),.1>Math.abs(y-k)?R.push({riskValue:k,y:.5,label:_=a.currentMax}):(C.push({riskValue:y,y:.5,label:w}),R.push({riskValue:k,y:.5,label:_})),{dataForPublicDisplay:f,currentRiskValue:y,data:b,maxLevelForecast:v,now:x,max:D,portialNow:C,portialMax:R}}},53714:function(e,t,a){"use strict";a.d(t,{E:function(){return r},a:function(){return i}});var o=a(89128),l=a.n(o);function s(e,t,a,o){let l=(a-e)*(Math.PI/180),s=(o-t)*(Math.PI/180),r=Math.sin(l/2)*Math.sin(l/2)+Math.cos(e*(Math.PI/180))*Math.cos(a*(Math.PI/180))*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))}function r(e,t){let a=l()(e,t);return a}async function i(e,t){try{if(null==e||null==t)return console.log("Invalid geo location"),null;let o=await a.e(4503).then(a.t.bind(a,34503,19)),l=function(e,t,a){if(!Array.isArray(a))throw Error("Data must be an array of location objects");let o=a[0],l=s(e,t,parseFloat(a[0].latitude),parseFloat(a[0].longitude));return a.forEach(a=>{let r=s(e,t,parseFloat(a.latitude),parseFloat(a.longitude));r<l&&(l=r,o=a)}),o}(e,t,o.default),r=l.suburb,i=l.state,n=l.postcode;return{suburb:r,state:i,postcode:n}}catch(e){return console.error("Error reverse geocoding:",e),null}}},83005:function(e,t,a){"use strict";a.d(t,{y:function(){return o}});let o=()=>{let e=localStorage.getItem("allValue");e=e?JSON.parse(e):[];let t=null==e?void 0:e.find(e=>null==e?void 0:e.check);return t||null}},90487:function(e,t,a){"use strict";a.r(t);var o=a(67573),l=a(85893),s=a(67294),r=a(15045),i=a(71230),n=a(15746),c=a(11163),d=a(23681),u=a(81921),p=a(19996),h=a(93571),m=a.n(h),g=a(87129),f=a(46982),b=a(75884),y=a(11768),v=a(53714),k=a(75109),w=a(20800),_=a(37744);let{Panel:x}=r.Z;class D extends s.Component{componentDidMount(){this.loadData(),this.setDay()}async setDay(){let e=new Date,t=new Date(e);t.setDate(t.getDate()+1);let a=t.getDay(),o=("0"+t.getDate()).slice(-2)+"/"+("0"+(t.getMonth()+1)).slice(-2),l=new Date(t);l.setDate(l.getDate()+1);let s=l.getDay(),r=("0"+l.getDate()).slice(-2)+"/"+("0"+(l.getMonth()+1)).slice(-2),i=new Date(l);i.setDate(i.getDate()+1);let n=i.getDay(),c=("0"+i.getDate()).slice(-2)+"/"+("0"+(i.getMonth()+1)).slice(-2),d=this.state.week[a],u=this.state.week[s],p=this.state.week[n],h=[];h.push({label:d,date:o},{label:u,date:r},{label:p,date:c});let m=e.getHours();23==m&&(m=0),this.setState({hour:m,forcasts:h})}async loadData(){this.setState({loading:!0});let e=await (0,b.b)();if(e&&e.emailVerified)try{let t=await (0,_.xK)("users/".concat(e.uid)),a=parseJSONValues(t.geoData),o=(0,v.E)(a.latitude,a.longitude);this.setState({parameters:{latitude:a.latitude,longitude:a.longitude,hourly:"temperature_2m,relativehumidity_2m,cloudcover,windspeed_10m",timezone:o}}),await this.setLoadedData(a)}catch(e){console.error("Get user geo data from firebase operation failed:",e),await this.loadGeodataFromCookie()}else await this.loadGeodataFromCookie()}async loadGeodataFromCookie(){let e=y.ZP.load("geoData");if(e){let t=(0,v.E)(e.latitude,e.longitude);this.setState({parameters:{latitude:e.latitude,longitude:e.longitude,hourly:"temperature_2m,relativehumidity_2m,cloudcover,windspeed_10m",timezone:t}})}else e=this.state.parameters;await this.setLoadedData(e)}async setLoadedData(e){let t=await (0,k.ss)(e,this.state.hour,this.state.translation);this.state.isPublicDisplay&&this.props.getHssDataCallBack({dataForPublicDisplay:t.dataForPublicDisplay,hour:this.state.hour}),this.setState({addressDefaultValue:e.suburb+", "+e.state+", "+e.postcode,geoData:e,currentRiskValue:t.currentRiskValue,data:t.data,loading:!1,maxLevelForecast:t.maxLevelForecast,legendNow:t.now,legendMax:t.max,portialLegendNow:t.portialNow,portialLegendMax:t.portialMax,dataForPublicDisplay:t.dataForPublicDisplay})}setDataWhenHandleAddressCallBack(e,t,a,o){let l=(0,v.E)(t,a);this.setState({loading:!0,parameters:{latitude:t,longitude:a,suburb:e[1],postcode:e[0],hourly:"temperature_2m,relativehumidity_2m,cloudcover,windspeed_10m",timezone:l}}),this.loadData()}renderAddressDropdown(){return this.state.reloadAddress||this.state.loading?(0,l.jsx)(p.Z,{}):(0,l.jsx)(w.Z,{handleLocateMeCallBack:this.handleLocateMeCallBack,handleAddressCallBack:this.handleAddressCallBack,defaultValue:this.state.addressDefaultValue,geoData:this.state.geoData})}collapseHeader(e,t){return(0,l.jsxs)(i.Z,{className:m().forcastRow,children:[(0,l.jsx)(i.Z,{children:e.label+"-"+e.date}),(0,l.jsxs)(i.Z,{className:m().forcastLevelMainRow,children:[(0,l.jsx)("div",{className:m().forcastLevelMainRowLabel,children:(0,l.jsx)("p",{children:this.state.translation.MaxRiskLabel})}),(0,l.jsx)(f.Z,{content:"111",trigger:"click",child:(0,l.jsx)("div",{className:"".concat(m().maxRiskLevelDiv," ").concat(t.className),children:(0,l.jsx)("p",{className:m().maxRiskLevelText,children:this.state.translation[t.maxRiskLevel]})})})]})]})}render(){return(0,l.jsx)("div",{children:(0,l.jsxs)(d.default,{children:[this.state.isPublicDisplay?null:this.renderAddressDropdown(),!this.state.loading&&(0,l.jsx)(g.default,{centerCoordinates:[this.state.parameters.latitude,this.state.parameters.longitude],markerCoordinates:[this.state.parameters.latitude,this.state.parameters.longitude]}),this.state.loading||(0,l.jsx)("div",{children:this.state.forcasts.map((e,t)=>(0,l.jsx)(r.Z,{className:m().collapseForecast,children:(0,l.jsx)(x,{header:this.collapseHeader(e,this.state.maxLevelForecast.slice(1)[t]),children:(0,l.jsx)(n.Z,{},t+"col")},t+"panel")},t+"collspa"))})]})})}constructor(e){super(e),(0,o.Z)(this,"state",{loading:!0,hour:0,week:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],forcasts:[],reloadAddress:!1,addressDefaultValue:"Parramatta Westfield,NSW, 2150",detailedRecommendationTips:{},parameters:{latitude:-33.8,longitude:151.01,hourly:"temperature_2m,relativehumidity_2m,cloudcover,windspeed_10m",timezone:"Australia/Sydney"},translation:{MaxRiskLabel:"最大风险值"}}),(0,o.Z)(this,"handleAddressCallBack",async e=>{let t={postcode:e[0],suburb:e[1],latitude:e[2],longitude:e[3],state:e[4]},a=e[2],o=e[3],l=await (0,b.b)();l&&l.emailVerified?(0,_.pN)("users/".concat(l.uid),{geoData:t}).then(()=>{this.setDataWhenHandleAddressCallBack(e,a,o,t)}).catch(l=>{console.error("Update user geo location operation failed:",l),y.ZP.save("geoData",JSON.stringify(t)),this.setDataWhenHandleAddressCallBack(e,a,o,t)}):(y.ZP.save("geoData",JSON.stringify(t)),this.setDataWhenHandleAddressCallBack(e,a,o,t))}),(0,o.Z)(this,"handleLocateMeCallBack",async()=>{this.setState({loading:!0,reloadAddress:!0}),navigator.geolocation.getCurrentPosition(async e=>{let t=e.coords.latitude,a=e.coords.longitude,o=await (0,v.a)(t,a);if(o){let e={postcode:o.postcode,suburb:o.suburb,latitude:t,longitude:a,state:o.state},l=await (0,b.b)(),s=o.suburb+", "+o.state+", "+o.postcode,r=(0,v.E)(t,a);l&&l.emailVerified?(0,_.pN)("users/".concat(l.uid),{geoData:e}).then(()=>{console.log("Operation successful to update address via locate me"),this.setState({reloadAddress:!1,addressDefaultValue:s,loading:!1,parameters:{latitude:t,longitude:a,suburb:o.suburb,postcode:o.postcode,hourly:"temperature_2m,relativehumidity_2m,cloudcover,windspeed_10m",timezone:r}}),this.loadData()}).catch(t=>{console.error("Operation failed:",t),y.ZP.save("geoData",JSON.stringify(e))}):(y.ZP.save("geoData",JSON.stringify(e)),this.setState({reloadAddress:!1,addressDefaultValue:s,loading:!1,parameters:{latitude:t,longitude:a,suburb:o.suburb,postcode:o.postcode,hourly:"temperature_2m,relativehumidity_2m,cloudcover,windspeed_10m",timezone:r}}),this.loadData())}else showAlert("error","Location Error","Unable to get your location."),this.setState({reloadAddress:!1,loading:!1})})})}}t.default=(0,c.withRouter)((0,u.O)(D))},93571:function(e){e.exports={publicDisplayContainer:"HssRiskDisplay_publicDisplayContainer__b4kgd",publicDisplayInnerContainer:"HssRiskDisplay_publicDisplayInnerContainer__Kw2rb",riskTipCol:"HssRiskDisplay_riskTipCol____GVK",generalTipRow:"HssRiskDisplay_generalTipRow__i4kq0",currentRiskLabelRow:"HssRiskDisplay_currentRiskLabelRow__jAJN2",riskLevelHeader:"HssRiskDisplay_riskLevelHeader__SZEG1",riskLevelLabel:"HssRiskDisplay_riskLevelLabel__f48sD",currentRiskLabelMaxRow:"HssRiskDisplay_currentRiskLabelMaxRow__nC9t5",riskLevelHeaderTodayMax:"HssRiskDisplay_riskLevelHeaderTodayMax__YauIT",riskLevelTodayMaxLabel:"HssRiskDisplay_riskLevelTodayMaxLabel__QwIn0",riskLevelHeaderTodayMaxTime:"HssRiskDisplay_riskLevelHeaderTodayMaxTime__RzQd_",forcastRow:"HssRiskDisplay_forcastRow__reV6W",forcastLevelMainRow:"HssRiskDisplay_forcastLevelMainRow___yiC0",forcastLevelMainRowLabel:"HssRiskDisplay_forcastLevelMainRowLabel__c4iij",maxRiskLevelDiv:"HssRiskDisplay_maxRiskLevelDiv__PuEZS",maxRiskLevelText:"HssRiskDisplay_maxRiskLevelText__0v_in",detailedRecommendatonMainDiv:"HssRiskDisplay_detailedRecommendatonMainDiv__rJ_N0",detailedRecommendatonRow:"HssRiskDisplay_detailedRecommendatonRow__NwV42",detailedRecommendatonImageCol:"HssRiskDisplay_detailedRecommendatonImageCol__nO27t",detailedRecommendatonTextCol:"HssRiskDisplay_detailedRecommendatonTextCol__52w_e",detailedRecommendationText:"HssRiskDisplay_detailedRecommendationText__cFtSm",container:"HssRiskDisplay_container__gLE5Q",coloredDiv:"HssRiskDisplay_coloredDiv__DV074",personalizedButton:"HssRiskDisplay_personalizedButton__MRfhw",collapseForecast:"HssRiskDisplay_collapseForecast__zfeBI"}}},function(e){e.O(0,[3662,2016,1627,2677,5871,5045,313,6409,6785,2575,3681,9774,2888,179],function(){return e(e.s=88902)}),_N_E=e.O()}]);