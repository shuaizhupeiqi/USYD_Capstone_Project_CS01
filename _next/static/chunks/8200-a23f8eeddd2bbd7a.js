"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8200],{56029:function(e,t,i){var l=i(85893),n=i(67294),a=i(11163),s=i(81921),o=i(26713),r=i(46888),d=i(14195),c=i(3023),h=i(75358),p=i(14888),x=i(86108),u=i(8081),m=i(98687),g=i(56880),y=i(9253),f=i(19996),j=i(4480);let w=(0,j.cn)({key:"chartState",default:{componentSize:"middle",loading:!1,data:[],parameters:{},chartType:"",maxRiskLevel:"",backgroundColor:"",maxLevel:"",fillColors:{low:"#52B795",medium:"#FFA600",high:"#ED5711",extreme:"#BA2011"}}});class v extends n.Component{render(){let{cx:e,cy:t,payload:i,maxValue:n,width:a,index:s,firstMaxIndices:o}=this.props,r=t<29,d=e;if(e<.15*a?d=e+15:e>.95*a&&(d=e-10),i.riskValue===n){if(s===o[0])return(0,l.jsxs)("g",{children:[(0,l.jsx)("circle",{cx:e,cy:t,r:5,strokeWidth:2,fill:"#990000"}),(0,l.jsx)("text",{x:d,y:r?t+28:t-20,textAnchor:"middle",fill:"black",children:"Max"}),(0,l.jsx)("path",{d:"M".concat(e,",").concat(r?t+10:t-10," L").concat(e-5,",").concat(r?t+15:t-15," L").concat(e+5,",").concat(r?t+15:t-15," Z"),fill:"black"})]});if(o.includes(s))return(0,l.jsx)("circle",{cx:e,cy:t,r:5,strokeWidth:2,fill:"#990000"})}return(0,l.jsx)("circle",{cx:e,cy:t,r:3,stroke:"black",strokeWidth:1,fill:"black"})}}class k extends n.Component{render(){let{x:e,y:t,payload:i}=this.props,n=i.value,a="";return 0===n?a="Low.":.25===n?a="Mod.":.5===n?a="Hig.":.75===n&&(a="Ext."),(0,l.jsx)("text",{x:e+5,y:t+15,fill:"#666",textAnchor:"middle",transform:"rotate(-90, ".concat(e-20,", ").concat(t,")"),fontWeight:"350",fontSize:"14",children:a})}}let b=e=>{let[t,i]=(0,j.FV)(w),[a,s]=(0,n.useState)({componentSize:"middle",loading:e.loading,data:e.data,parameters:e.parameters,chartType:e.chartType,maxRiskLevel:"",backgroundColor:"",maxLevel:e.maxLevel});(0,n.useEffect)(()=>{s(t=>({...t,parameters:e.parameters,loading:e.loading,data:e.data,chartType:e.chartType,maxLevel:e.maxLevel}))},[e]);let b=e=>{let t=-1/0;return e.forEach(e=>{e.riskValue>t&&(t=e.riskValue)}),t};return(0,l.jsx)("div",{children:a.loading?(0,l.jsx)(f.Z,{}):(0,l.jsx)(o.Z,{direction:"vertical",size:"middle",style:{display:"flex"},children:(0,l.jsx)(y.h,{width:"100%",height:250,children:"AreaChart"===a.chartType?(0,l.jsxs)(r.T,{data:a.data,margin:{top:0,right:0,left:0,bottom:0},children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),(0,l.jsx)("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})]}),(0,l.jsxs)("linearGradient",{id:"colorPv",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"5%",stopColor:"#82ca9d",stopOpacity:.8}),(0,l.jsx)("stop",{offset:"95%",stopColor:"#82ca9d",stopOpacity:0})]})]}),(0,l.jsx)(d.q,{strokeDasharray:"3 3"}),(0,l.jsx)(c.K,{dataKey:"time"}),(0,l.jsx)(h.B,{domain:[0,1],axisLine:!1,tick:(0,l.jsx)(k,{}),interval:0,padding:{top:20,bottom:20}}),(0,l.jsx)(p.u,{}),(0,l.jsx)(x.u,{type:"monotone",dataKey:"riskValue",stroke:"black",fillOpacity:1,fill:"blue"}),["low","medium","high","extreme"].map((e,i)=>(0,l.jsx)(u.z,{y1:.25*i,y2:(i+1)*.25,fill:t.fillColors[e],fillOpacity:.8},e))]}):(()=>{let{data:e}=a,i=b(e),n=e.map((e,t)=>e.riskValue===i?t:-1).filter(e=>-1!==e),s=n.slice(0,Math.min(5,n.length));return(0,l.jsxs)(m.w,{data:a.data,margin:{top:0,right:10,left:-35,bottom:0},children:[(0,l.jsx)(c.K,{dataKey:"time",interval:1}),(0,l.jsx)(h.B,{domain:[0,1],axisLine:!1,tick:(0,l.jsx)(k,{}),interval:0,padding:{top:20,bottom:20}}),["low","medium","high","extreme"].map((e,i)=>(0,l.jsx)(u.z,{y1:.25*i,y2:(i+1)*.25,fill:t.fillColors[e],fillOpacity:.8},e)),(0,l.jsx)(g.x,{type:"monotone",dataKey:"riskValue",stroke:"black",dot:(0,l.jsx)(v,{maxValue:i,firstMaxIndices:s}),strokeWidth:3}),(0,l.jsx)(p.u,{})]})})()})})})};t.Z=(0,a.withRouter)((0,s.O)(b))},40092:function(e,t,i){i.d(t,{Z:function(){return eb}});var l=i(85893),n=i(67294),a=i(15045),s=i(71230),o=i(15746),r=i(71577),d=i(96486),c=i(11163),h=i.n(c),p=i(81921),x=i(63137),u=i(56029),m=i(67573),g=i(26713),y=i(98687),f=i(3023),j=i(75358),w=i(8081),v=i(25048),k=i(56880),b=i(14888),L=i(9253),C=i(19996),S=i(16397);class R extends n.Component{componentDidMount(){this.loadData(),this.updateCountDown()}componentWillUnmount(){clearTimeout(this.timeout)}componentDidUpdate(e){e!==this.props&&this.setState({dataForPublicDisplay:this.props.dataForPublicDisplay})}updateCountDown(){let e=new Date,t=e.getMinutes(),i=e.getSeconds();this.timeout=setTimeout(()=>{this.loadData(),this.updateCountDown()},(60-t)*6e4-1e3*i)}getDate(e){return{date:("0"+e.getDate()).slice(-2)+"/"+("0"+(e.getMonth()+1)).slice(-2),weekDay:this.state.week[e.getDay()]}}loadData(){let e=new Date,t=this.getDate(e),i=t.date,l=t.weekDay,n=new Date(e);n.setDate(n.getDate()+1);let a=this.getDate(n),s=a.date,o=a.weekDay,r=e.getHours();this.setState({loading:!1,currentTime:r,dateData:{todayDate:i,todayWeekDay:l,tomorrowDate:s,tomorrowWeekDay:o}})}lineChart(){return(0,l.jsxs)(y.w,{data:this.state.dataForPublicDisplay,margin:{top:20,right:40,left:-50,bottom:0},children:[(0,l.jsx)(f.K,{dataKey:"time",interval:0}),(0,l.jsx)(j.B,{domain:[0,1],axisLine:!1,tick:!1}),(0,l.jsx)(w.z,{y1:0,y2:.25,fill:this.state.fillColors.low,fillOpacity:.8}),(0,l.jsx)(w.z,{y1:.25,y2:.5,fill:this.state.fillColors.medium,fillOpacity:.8}),(0,l.jsx)(w.z,{y1:.5,y2:.75,fill:this.state.fillColors.high,fillOpacity:.8}),(0,l.jsx)(w.z,{y1:.75,y2:1,fill:this.state.fillColors.extreme,fillOpacity:.8}),(0,l.jsx)(w.z,{x1:this.state.currentTime,x2:this.state.currentTime+1,fill:S.MA[13],fillOpacity:.2,children:(0,l.jsx)(v._,{value:"Current Time Period",position:"top",fill:grau[13],fillOpacity:.8,fontSize:17})}),(0,l.jsx)(k.x,{type:"monotone",dataKey:"riskValue",stroke:S.MA[13],fill:S.MA[13],strokeWidth:3}),(0,l.jsx)(b.u,{})]})}render(){return(0,l.jsx)("div",{children:this.state.loading?(0,l.jsx)(C.Z,{}):(0,l.jsxs)(g.Z,{style:{display:"flex",flexDirection:"vertical"},size:"middle",children:[(0,l.jsx)(L.h,{width:"103%",height:250,style:{},children:this.lineChart()}),(0,l.jsxs)("div",{style:{width:"100%",height:"5px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,l.jsx)("div",{style:{width:"50%"},children:(0,l.jsxs)("p",{children:[this.state.dateData.todayDate," -"," ",this.state.dateData.todayWeekDay]})}),(0,l.jsx)("div",{style:{width:"50%",textAlign:"right"},children:(0,l.jsxs)("p",{children:[this.state.dateData.tomorrowDate," -"," ",this.state.dateData.tomorrowWeekDay]})})]})]})})}constructor(e){super(e),(0,m.Z)(this,"state",{componentSize:"middle",loading:!0,dataForPublicDisplay:this.props.dataForPublicDisplay,maxRiskLevel:"",backgroundColor:"",week:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fillColors:{low:"#52B795",medium:"#FFA600",high:"#BB3E03",extreme:"#9A0207"}})}}var M=(0,c.withRouter)((0,p.O)(R)),Z=i(13481),D=i(57478),F=i(39746),A=i(2763),T=i(26657),E=i(55241),z=i(25035);let I=[{x:.1,y:.5}],V=[{x:.35,y:.5}],W=[{x:.61,y:.5}],B=[{x:.85,y:.5}],O=[{x:.05,y:.5}],K=[{x:.27,y:.5}],P=[{x:.55,y:.5}],H=[{x:.78,y:.5}],N=(e,t)=>{let{x:i,y:n,value:a}=e;return window.innerWidth>1100&&window.innerWidth-i>900?i+=28:window.innerWidth<=1100&&window.innerWidth+i<1150?i+=28:i-=17,(0,l.jsx)("text",{x:i,y:n+20,fill:"black",textAnchor:"middle",dominantBaseline:"middle",children:t})},_=(e,t)=>{let{x:i,y:n,value:a}=e;return"Now is Max"==a?i<80?i+=45:i-=40:"当前为最高"==a?i<80?i+=45:i-=40:window.innerWidth>1100&&window.innerWidth-i<300?i-=18:window.innerWidth<=1100&&window.innerWidth-i<200?i-=18:i+=23,(0,l.jsx)("text",{x:i,y:n-10,fill:"black",textAnchor:"middle",dominantBaseline:"middle",children:t})},U=(e,t)=>{let{x:i,y:n}=e;return(0,l.jsx)("text",{x:i+40,y:n+5,fill:"black",textAnchor:"middle",dominantBaseline:"middle",children:t})},G=(e,t)=>{let{x:i,y:n}=e;return(0,l.jsx)("text",{x:i+50,y:n+5,fill:"black",textAnchor:"middle",dominantBaseline:"middle",children:t})},q=(e,t)=>{let{x:i,y:n}=e;return(0,l.jsx)("text",{x:i+40,y:n+5,fill:"black",textAnchor:"middle",dominantBaseline:"middle",children:t})},Y=(e,t)=>{let{x:i,y:n}=e;return(0,l.jsx)("text",{x:i+50,y:n+5,fill:"black",textAnchor:"middle",dominantBaseline:"middle",children:t})},J=e=>(0,l.jsx)(Z.A,{width:2,height:55,x:e.x+5,y:e.y-23,fill:"black"}),$=e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Z.A,{width:2,height:12,x:e.x+2,y:e.y-22,fill:"black"}),(0,l.jsx)(Z.A,{width:2,height:12,x:e.x+2,y:e.y-5,fill:"black"}),(0,l.jsx)(Z.A,{width:2,height:9,x:e.x+2,y:e.y+25,fill:"black"}),(0,l.jsx)(Z.A,{width:2,height:12,x:e.x+2,y:e.y+10,fill:"black"})]}),Q=e=>(0,l.jsx)(Z.A,{width:2,height:55,x:e.x+8,y:e.y-21,fill:"black"}),X=e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Z.A,{width:2,height:12,x:e.x+5,y:e.y-22,fill:"black"}),(0,l.jsx)(Z.A,{width:2,height:12,x:e.x+5,y:e.y-5,fill:"black"}),(0,l.jsx)(Z.A,{width:2,height:9,x:e.x+5,y:e.y+25,fill:"black"}),(0,l.jsx)(Z.A,{width:2,height:12,x:e.x+5,y:e.y+10,fill:"black"})]});class ee extends n.Component{componentDidMount(){this.loadTranslation(),window.addEventListener("resize",this.handleResize),this.handleResize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}async loadTranslation(){let{languageHelper:e}=this.props,t=await e.translation("BottomLegend");this.setState({translation:t})}componentDidUpdate(e){e!==this.props&&this.setState({loading:this.props.loading,legendNow:this.props.legendNow,legendMax:this.props.legendMax})}handleResize(){this.setState({landscape:window.innerWidth>770})}render(){return(0,l.jsx)("div",{children:this.state.loading?(0,l.jsx)(C.Z,{}):this.mainView()})}constructor(e){super(e),(0,m.Z)(this,"state",{componentSize:"middle",legendNow:this.props.legendNow,legendMax:this.props.legendMax,portialLegendNow:this.props.portialLegendNow,portialLegendMax:this.props.portialLegendMax,loading:this.props.loading,translation:{Low:"Low",Medium:"Medium",High:"High",Extreme:"Extreme",NowLabel:"Now",MaxLabel:"Max",NowIsMaxLabel:"Now Is Max"},fillColors:{low:"#52B795",medium:"#FFA600",high:"#ED5711",extreme:"#BA2011"},landscape:!1,showModal:!1}),(0,m.Z)(this,"mainView",()=>this.state.landscape?this.landScapeView():this.portialView()),(0,m.Z)(this,"toggleModal",()=>{this.setState(e=>({showModal:!e.showModal}))}),(0,m.Z)(this,"landScapeView",()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{position:"relative",width:"100%",height:"10px"},children:(0,l.jsx)(E.Z,{content:(0,l.jsx)("div",{children:"This is explain of HssRisk"}),title:"Explain",trigger:"click",placement:"topRight",getPopupContainer:e=>e.parentNode,children:(0,l.jsx)("div",{style:{position:"absolute",top:0,right:0},children:(0,l.jsx)(z.Z,{})})})}),(0,l.jsx)(L.h,{width:"100%",height:100,children:(0,l.jsxs)(D.G,{margin:{top:20,right:0,left:-60,bottom:-10},children:[(0,l.jsx)(f.K,{type:"number",dataKey:"riskValue",domain:[0,1],axisLine:!1,tick:!1}),(0,l.jsx)(j.B,{type:"number",dataKey:"y",domain:[0,1],axisLine:!1,tick:!1}),(0,l.jsx)(w.z,{x1:0,x2:.25,fill:this.state.fillColors.low,fillOpacity:.9}),(0,l.jsx)(w.z,{x1:.25,x2:.5,fill:this.state.fillColors.medium,fillOpacity:.8}),(0,l.jsx)(w.z,{x1:.5,x2:.75,fill:this.state.fillColors.high,fillOpacity:.8}),(0,l.jsx)(w.z,{x1:.75,x2:1,fill:this.state.fillColors.extreme,fillOpacity:.8}),(0,l.jsx)(F.b,{name:"Now",data:this.state.legendNow,fill:"black",shape:J,children:(0,l.jsx)(A.e,{dataKey:"label",position:"right",content:e=>N(e,this.state.translation.NowLabel)})}),(0,l.jsx)(F.b,{name:"Today's Max",data:this.state.legendMax,fill:"black",shape:$,children:(0,l.jsx)(A.e,{dataKey:"label",position:"right",content:e=>_(e,0==this.state.legendNow.length?this.state.translation.NowIsMaxLabel:this.state.translation.MaxLabel)})})]})}),(0,l.jsx)(L.h,{width:"100%",height:20,children:(0,l.jsxs)(D.G,{margin:{top:10,right:0,left:-60,bottom:0},children:[(0,l.jsx)(f.K,{type:"number",dataKey:"x",domain:[0,1],axisLine:!1,tick:!1}),(0,l.jsx)(j.B,{type:"number",dataKey:"y",axisLine:!1,tick:!1}),(0,l.jsx)(F.b,{data:I,name:this.state.translation.Low,fill:this.state.fillColors.low,children:(0,l.jsx)(A.e,{position:"right",content:e=>U(e,this.state.translation.Low)})}),(0,l.jsx)(F.b,{data:V,name:this.state.translation.Medium,fill:this.state.fillColors.medium,children:(0,l.jsx)(A.e,{position:"right",content:e=>G(e,this.state.translation.Medium)})}),(0,l.jsx)(F.b,{data:W,name:this.state.translation.High,fill:this.state.fillColors.high,children:(0,l.jsx)(A.e,{position:"right",content:e=>q(e,this.state.translation.High)})}),(0,l.jsx)(F.b,{data:B,name:this.state.translation.Extreme,fill:this.state.fillColors.extreme,children:(0,l.jsx)(A.e,{position:"right",content:e=>Y(e,this.state.translation.Extreme)})})]})})]})),(0,m.Z)(this,"portialView",()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{position:"relative",width:"100%",height:"10px"},children:(0,l.jsx)(E.Z,{content:(0,l.jsx)("div",{children:"This is explain of HssRisk"}),title:"Explain",trigger:"click",placement:"topRight",getPopupContainer:e=>e.parentNode,children:(0,l.jsx)("div",{style:{position:"absolute",top:0,right:0},children:(0,l.jsx)(z.Z,{})})})}),(0,l.jsx)(L.h,{width:"100%",height:100,children:(0,l.jsxs)(D.G,{margin:{top:10,right:0,left:-60,bottom:-10},children:[(0,l.jsx)(f.K,{type:"number",dataKey:"riskValue",domain:[0,1],axisLine:!1,tick:!1}),(0,l.jsx)(j.B,{type:"number",dataKey:"y",domain:[0,1],axisLine:!1,tick:!1}),(0,l.jsx)(T.d,{type:"number",range:[200,201]}),(0,l.jsx)(w.z,{x1:0,x2:.25,fill:this.state.fillColors.low,fillOpacity:.9}),(0,l.jsx)(w.z,{x1:.25,x2:.5,fill:this.state.fillColors.medium,fillOpacity:.8}),(0,l.jsx)(w.z,{x1:.5,x2:.75,fill:this.state.fillColors.high,fillOpacity:.8}),(0,l.jsx)(w.z,{x1:.75,x2:1,fill:this.state.fillColors.extreme,fillOpacity:.8}),(0,l.jsx)(F.b,{name:"Now",data:this.state.portialLegendNow,fill:"black",shape:Q,children:(0,l.jsx)(A.e,{dataKey:"label",position:"right",content:e=>N(e,this.state.translation.NowLabel)})}),(0,l.jsx)(F.b,{name:"Today's Max",data:this.state.portialLegendMax,fill:"black",shape:X,children:(0,l.jsx)(A.e,{dataKey:"label",position:"right",content:e=>_(e,0==this.state.portialLegendNow.length?this.state.translation.NowIsMaxLabel:this.state.translation.MaxLabel)})})]})}),(0,l.jsx)(L.h,{width:"100%",height:20,children:(0,l.jsxs)(D.G,{margin:{top:10,right:0,left:-60,bottom:0},children:[(0,l.jsx)(f.K,{type:"number",dataKey:"x",domain:[0,1],axisLine:!1,tick:!1}),(0,l.jsx)(j.B,{type:"number",dataKey:"y",axisLine:!1,tick:!1}),(0,l.jsx)(F.b,{data:O,name:this.state.translation.Low,fill:this.state.fillColors.low,children:(0,l.jsx)(A.e,{position:"insideRight",content:e=>U(e,this.state.translation.Low)})}),(0,l.jsx)(F.b,{data:K,name:this.state.translation.Medium,fill:this.state.fillColors.medium,children:(0,l.jsx)(A.e,{position:"insideRight",content:e=>G(e,this.state.translation.Medium)})}),(0,l.jsx)(F.b,{data:P,name:this.state.translation.High,fill:this.state.fillColors.high,children:(0,l.jsx)(A.e,{position:"insideRight",content:e=>q(e,this.state.translation.High)})}),(0,l.jsx)(F.b,{data:H,name:this.state.translation.Extreme,fill:this.state.fillColors.extreme,children:(0,l.jsx)(A.e,{position:"insideRight",content:e=>Y(e,this.state.translation.Extreme)})})]})})]})),this.handleResize=this.handleResize.bind(this)}}var et=(0,c.withRouter)((0,p.O)(ee)),ei=i(25675),el=i.n(ei),en=i(46982),ea=i(45605);let es="/USYD_Capstone_Project_CS01";class eo extends n.Component{componentDidMount(){window.addEventListener("resize",this.handleResize),this.handleResize(),this.loadTranslation()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}componentDidUpdate(e){e!==this.props&&this.setState({loading:this.props.loading,data:this.props.data,currentRiskValue:this.props.currentRiskValue,maxLevelForecast:this.props.maxLevelForecast})}handleResize(){this.setState({landscape:window.innerWidth>770})}async loadTranslation(){let{languageHelper:e}=this.props,t=await (0,x.$6)(),i=await e.translation("CurrentHssRiskDisplay");this.setState({translation:i,detailedRecommendationTips:t.detailedRecommendationTips})}detailedRecommendation(e,t){var i;let n=null===(i=this.state.detailedRecommendationTips[t])||void 0===i?void 0:i.tips,a=e.label;return n?(0,l.jsxs)("div",{style:{width:"100%"},children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{children:["".concat(this.state.translation.TheCurrentHSSFor," "),(0,l.jsx)("strong",{children:a})," ".concat(this.state.translation.Is," "),(0,l.jsx)("strong",{children:this.state.translation[t]}),"."]}),(0,l.jsx)("p",{children:this.state.translation.BelowIs})]}),n.map((e,i)=>{let n=e.label,a=this.state.translation.DetailedRecommendationTips[t][n];return(0,l.jsxs)(s.Z,{style:{width:"100%"},children:[(0,l.jsx)(o.Z,{style:{display:"flex",textAlign:"center",alignItems:"center",justifyContent:"right",width:"15%"},children:(0,l.jsx)(el(),{src:es+e.icon,alt:"",width:35,height:35})}),(0,l.jsx)(o.Z,{style:{width:"80%"},children:(0,l.jsx)("p",{style:{marginLeft:"2%"},children:a||"Unable to read string"})})]},i)})]}):null}calculateRiskLevel(e){let t="Extreme",i={backgroundColor:S.Q6[5]};return e<.75&&(t="High",i={backgroundColor:S.$y[5]}),e<.5&&(t="Moderate",i={backgroundColor:S.er[5]}),e<.25&&(t="Low",i={backgroundColor:S.ek[5]}),{riskLevel:t,style:i}}generateData(){let e=this.state.data[0][0].divider,t=this.state.currentRiskValue*e,i=this.state.maxLevelForecast[0].maxRiskValue*e,l=this.calculateRiskLevel(t/.85),n=this.calculateRiskLevel(i/.85),a={iconLabel:this.state.translation.Healthy,riskValue:t/.85,style:l.style,riskLevel:l.riskLevel,maxRiskLevel:n.riskLevel,maxRiskStyle:n.style,icon:"/icons/healthy-adults.png",key:"helatAdult",label:this.state.translation.HealthAdultLabel},s=this.calculateRiskLevel(t/.85/.8),o=this.calculateRiskLevel(i/.85/.8),r={iconLabel:this.state.translation.Vulnerable,riskValue:t/.85/.8,style:s.style,riskLevel:s.riskLevel,maxRiskLevel:o.riskLevel,maxRiskStyle:o.style,icon:"/icons/vulnerable_alter.png",key:"elderAdult",label:this.state.translation.HealtherOlderLabel},d=this.calculateRiskLevel(t/.85/.7),c=this.calculateRiskLevel(i/.85/.7);return[a,r,{iconLabel:this.state.translation.Comorbidity,riskValue:t/.85/.7,style:d.style,riskLevel:d.riskLevel,maxRiskLevel:c.riskLevel,maxRiskStyle:c.style,icon:"/icons/people-with-chronic-illnesses.png",key:"withMed",label:this.state.translation.PeopleWithIllnessesLabel}]}riskLevelDiv(e,t){return(0,l.jsxs)("div",{style:{...t,borderRadius:"5px",width:this.state.landscape?"120px":window.innerWidth<=733?"70px":"100px",height:"25px",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",fontWeight:"bold",marginTop:"10px",marginLeft:this.state.landscape?void 0:"5px",fontSize:this.state.landscape?void 0:"smaller"},children:[(0,l.jsx)("p",{children:e}),(0,l.jsx)(ea.Z,{style:{marginLeft:"5px"}})]})}landscapeView(e){return(0,l.jsxs)(o.Z,{style:{width:"60%"},children:[(0,l.jsx)(s.Z,{style:{width:"70%",display:"flex",alignItems:"center",justifyContent:"space-evenly"},children:(0,l.jsx)(en.Z,{content:this.detailedRecommendation(e,e.riskLevel),trigger:"click",child:this.riskLevelDiv(this.state.translation.current,e.style)})}),(0,l.jsx)(s.Z,{style:{width:"70%",display:"flex",alignItems:"center",justifyContent:"space-evenly"},children:(0,l.jsx)(en.Z,{content:this.detailedRecommendation(e,e.maxRiskLevel),trigger:"click",child:this.riskLevelDiv(this.state.translation.max,e.maxRiskStyle)})})]})}mobileView(e){return(0,l.jsxs)(o.Z,{style:{width:"100%"},children:[(0,l.jsx)(s.Z,{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(en.Z,{content:this.detailedRecommendation(e,e.riskLevel),trigger:"click",child:this.riskLevelDiv(this.state.translation.current,e.style)})}),(0,l.jsx)(s.Z,{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(en.Z,{content:this.detailedRecommendation(e,e.maxRiskLevel),trigger:"click",child:this.riskLevelDiv(this.state.translation.max,e.maxRiskStyle)})})]})}riskTipForAgeGroup(){let e=this.generateData();return(0,l.jsx)("div",{style:{width:"100%",marginBottom:"2%",marginTop:"1%"},children:(0,l.jsx)(s.Z,{style:{width:"95%"},children:e.map((e,t)=>(0,l.jsxs)(o.Z,{span:8,children:[(0,l.jsx)(s.Z,{style:{textAlign:"center",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"15px"},children:(0,l.jsx)("p",{children:e.iconLabel})}),(0,l.jsxs)(s.Z,{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)("div",{style:{display:"flex",justifyContent:this.state.landscape?"right":"center",alignItems:"flex-end",width:this.state.landscape?"40%":"100%",marginTop:this.state.landscape?"0":"2%"},children:(0,l.jsx)(el(),{src:es+e.icon,alt:"",width:60,height:60})}),this.state.landscape?this.landscapeView(e):this.mobileView(e)]})]},e.key))})})}render(){return(0,l.jsx)("div",{children:this.state.loading?(0,l.jsx)(C.Z,{}):this.riskTipForAgeGroup()})}constructor(e){super(e),(0,m.Z)(this,"state",{landscape:!1,translation:{},detailedRecommendationTips:{},loading:this.props.loading,data:this.props.data,currentRiskValue:this.props.currentRiskValue,maxLevelForecast:this.props.maxLevelForecast}),this.handleResize=this.handleResize.bind(this)}}var er=(0,c.withRouter)((0,p.O)(eo)),ed=i(4175),ec=i(4480),eh=i(93096),ep=i(5152),ex=i.n(ep),eu=i(98293),em=i(56886);i(41664);let eg=e=>{let{data:t}=e,[i,a]=(0,ec.FV)(em.ge)||[[],null],[s,o]=(0,ec.FV)(em.eY),r=e=>{let{items:t,interval:i=5e3}=e,[l,a]=(0,n.useState)(0),[s,o]=(0,n.useState)(!0),[r,d]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=setInterval(()=>{a(e=>{let i=s?(e+1)%t.length:(e-1+t.length)%t.length;return i===t.length-1?o(!1):0===i&&o(!0),i})},i);return()=>clearInterval(e)},[t,i,s])},c=e=>{let t=null==i?void 0:i.map((t,i)=>t?{...t,check:e===i}:t);a(t),localStorage.setItem("allValue",JSON.stringify(t)),o(!s)};return(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},children:[(0,l.jsx)(r,{items:["Add profile for your family and friends","Learn more at Intorduction Page "]}),(0,l.jsx)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",width:"100%"},children:null==i?void 0:i.map((e,t)=>{var i,n,a;return(0,l.jsx)(l.Fragment,{children:(0,d.isEmpty)(e)?null:(0,l.jsxs)("div",{style:{alignItems:"center",display:"flex",flexDirection:"column"},children:[(0,l.jsx)(eu.C,{size:100,onClick:()=>c(t),style:{backgroundColor:(null==e?void 0:e.check)?"#f56a00":"#eee",cursor:"pointer",marginTop:"5px",marginBottom:"-5px"},children:null===(i=null==e?void 0:null===(n=e.firstName)||void 0===n?void 0:n.substring(0,1))||void 0===i?void 0:i.toLocaleUpperCase()}),(0,l.jsx)("h4",{style:{backgroundColor:"#005B8E",borderRadius:"5px",padding:"5px 10px",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.1)",color:"#FFFFFF",textAlign:"center",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(null==e?void 0:e.Relationship)?null===(a=JSON.parse(null==e?void 0:e.Relationship))||void 0===a?void 0:a.label:"Anonymous"})]})})})})]})};i(66005);var ey=i(42708);let ef=ex()(()=>i.e(7129).then(i.bind(i,87129)),{loadableGenerated:{webpack:()=>[87129]}}),{Panel:ej}=a.Z,ew=()=>{console.log("Personalise HSS Risk button clicked."),h().push("/SettingPage")},ev="/USYD_Capstone_Project_CS01",ek=e=>{let[t,i]=(0,n.useState)(null),c=e=>{i(e.length?e[0]:null)},[p,m]=(0,n.useState)(!1),[g,y]=(0,ey.YD)({triggerOnce:!0}),{isPublicDisplay:f,dataForPublicDisplay:j,data:w,currentRiskValue:v,forcasts:k,chartType:b,maxLevelForecast:L,legendNow:S,legendMax:R,portialLegendNow:Z,portialLegendMax:D,languageHelper:F}=e,A={Extreme:{backgroundColor:"#BA2011",color:"white",fontWeight:"bold"},High:{backgroundColor:"#ED5711",color:"white",fontWeight:"bold"},Moderate:{backgroundColor:"#FFA600",color:"white",fontWeight:"bold"},Low:{backgroundColor:"#52B795",color:"white",fontWeight:"bold"}},T={detailedRecommendationMain:{width:"100%"},detailedRecommendatonImageCol:{display:"flex",textAlign:"center",alignItems:"center",justifyContent:"flex-end",width:"15%"},detailedRecommendatonTextCol:{width:"80%"},detailedRecommendationText:{marginLeft:"2%"},riskTipCol:{width:"100%",marginBottom:"2%",marginTop:"1%"},generalTipRow:{width:"100%",textAlign:"center",justifyContent:"center",alignItems:"center",display:"flex"},currentRiskLabelRow:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},riskLevelHeader:{height:"5px",marginRight:"10px"},riskLevelLabel:{fontSize:"30px",fontWeight:"bold",textDecoration:"underline",marginLeft:"1%",marginTop:"6px",marginBottom:"6px",height:"25px"},currentRiskLabelMaxRow:{display:"flex",alignItems:"center",justifyContent:"center",height:"50px"},riskLevelHeaderTodayMax:{fontSize:"15px",marginRight:"10px"},riskLevelTodayMaxLabel:{fontSize:"20px",fontWeight:"bold",textDecoration:"underline",marginLeft:"1%"},riskLevelHeaderTodayMaxTime:{marginLeft:"1%",fontSize:"15px"},collapseForecast:{marginBottom:"10px",marginTop:"5px"},forcastRow:{width:"100%",display:"flex",justifyContent:"center",align:"middle",height:"30px"},forcastLevelMainRow:{height:"30px",width:"10%",display:"flex",justifyContent:"flex-end"},forcastLevelMainRowLabel:{textAlign:"center",height:"100%",alignItems:"center",display:"flex",justifyContent:"flex-end"},maxRiskLevelText:{color:"white",fontWeight:"bold",margin:"0 auto"},maxRiskLevelDiv:{borderRadius:"5px",textAlign:"center",Width:"100px",height:"30px",alignItems:"center",display:"flex",justifyContent:"center"},publicDisplayContainer:{width:"100%",display:"flex",alignitems:"center",justifycontent:"center"},publicDisplayInnerContainer:{width:"90%",margintop:"2%"},container:{width:"100%",marginbottom:"1%"}},[E,z]=(0,n.useState)(!0),[I,V]=(0,n.useState)("Extreme"),[W,B]=(0,n.useState)(A.Extreme),[O,K]=(0,n.useState)({}),[P,H]=(0,n.useState)({}),[N,_]=(0,n.useState)({}),[U,G]=(0,n.useState)({}),q=(0,ec.sJ)(eh._),Y=(0,ed.Z)(F,"CurrentHssRiskDisplay"),J=(0,n.useCallback)((e,t)=>{let i=I,l=A.Extreme,n=(0,d.cloneDeep)(e);v<.25?(i="Low",l=A.Low,n=t.low):v<.5&&v>=.25?(i="Moderate",l=A.Moderate,n=t.moderate):v<.75&&v>=.5&&(i="High",l=A.High,n=t.high),V(i),B(l),_(n)},[v,W]),$=(0,n.useCallback)(async()=>{z(!0);let{ageGroupTips:e={}}=await (0,x.m2)(),{allGeneralTips:t={}}=await (0,x.eP)(),{generalTips:i={}}=await (0,x.cO)(),{detailedRecommendationTips:l={}}=await (0,x.$6)();K(e),H(t),_(i),G(l),J(i,t),z(!1)},[]);(0,n.useEffect)(()=>{$(),B(A[I])},[I]);let Q=(0,n.useCallback)(e=>{let t="Extreme",i=A.Extreme;return e<.25?(t="Low",i=A.Low):e<.5?(t="Moderate",i=A.Moderate):e<.75&&(t="High",i=A.High),{riskLevel:t,riskStyle:i}},[]),X={fontSize:"18px"},ee={Low:{"Cool yourself":[{tip:"Keep hydrated by drinking water",imgSrc:"/icons/water-bottle.png"}],"Use fans effectively":[{tip:"Use fans",imgSrc:"/icons/fan.png"}],"Keep your house cool":[{tip:"Open windows only if it is hotter inside than outside",imgSrc:"/icons/ventilation.png"},{tip:"Block sunlight using blinds or curtains",imgSrc:"/icons/blinds.png"},{tip:"Set the air conditioner at 27˚C and use a fan pointing at you",imgSrc:"/icons/ac.png"},{tip:"Use an evaporative cooler",imgSrc:"/icons/evaporative.png"}],"Plan your day":[{tip:"Wear lightweight, loose-fitting clothing preferably white",imgSrc:"/icons/tank-top.png"}]},Moderate:{"Cool yourself":[{tip:"Drink a glass of water every hour even if you do not feel thirsty",imgSrc:"/icons/slush-drink.png"},{tip:"Wrap a wet towel loosely around your head and neck",imgSrc:"/icons/squeeze.png"}],"Use fans effectively":[{tip:"Use fans",imgSrc:"/icons/fan.png"},{tip:"Use a misting fan in a shaded well-ventilated area",imgSrc:"/icons/misting_fan.png"}],"Keep your house cool":[{tip:"Block sunlight using blinds or curtains",imgSrc:"/icons/blinds.png"},{tip:"Open windows only if it is hotter inside than outside",imgSrc:"/icons/ventilation.png"},{tip:"Set the air conditioner at 27˚C and use a fan pointing at you",imgSrc:"/icons/ac.png"}],"Plan your day":[]},High:{"Cool yourself":[{tip:"Drink a glass of water every hour even if you do not feel thirsty",imgSrc:"/icons/slush-drink.png"},{tip:"Keep your skin wet with a spray bottle or by applying water",imgSrc:"/icons/spray.png"},{tip:"Wrap a wet towel loosely around your head and neck",imgSrc:"/icons/squeeze.png"}],"Use fans effectively":[{tip:"Use a misting fan in a shaded well-ventilated area",imgSrc:"/icons/misting_fan.png"}],"Keep your house cool":[{tip:"Block sunlight using blinds or curtains",imgSrc:"/icons/blinds.png"},{tip:"Open windows only if it is hotter inside than outside",imgSrc:"/icons/ventilation.png"},{tip:"Set the air conditioner at 27˚C and use a fan pointing at you",imgSrc:"/icons/ac.png"},{tip:"Use an evaporative cooler",imgSrc:"/icons/evaporative.png"}],"Plan your day":[{tip:"Wear lightweight, loose-fitting clothing preferably white",imgSrc:"/icons/tank-top.png"},{tip:"Rest more often, in a shaded place with natural air movement",imgSrc:"/icons/alone.png"},{tip:"Avoid strenuous activities",imgSrc:"/icons/no-running.png"},{tip:"Check on people who may be vulnerable to the heat",imgSrc:"/icons/vulnerable_heat.png"}]},Extreme:{"Cool yourself":[{tip:"Drink a glass of water every hour even if you do not feel thirsty",imgSrc:"/icons/slush-drink.png"},{tip:"Keep your skin wet with a spray bottle or by applying water",imgSrc:"/icons/spray.png"},{tip:"Wrap a wet towel loosely around your head and neck",imgSrc:"/icons/squeeze.png"}],"Use fans effectively":[{tip:"Use a misting fan in a shaded well-ventilated area",imgSrc:"/icons/misting_fan.png"}],"Keep your house cool":[{tip:"Block sunlight using blinds or curtains",imgSrc:"/icons/blinds.png"},{tip:"Open windows only if it is hotter inside than outside",imgSrc:"/icons/ventilation.png"},{tip:"Set the air conditioner at 27˚C and use a fan pointing at you",imgSrc:"/icons/ac.png"},{tip:"Use an evaporative cooler",imgSrc:"/icons/evaporative.png"}],"Plan your day":[{tip:"Wear lightweight, loose-fitting clothing preferably white",imgSrc:"/icons/tank-top.png"},{tip:"Rest more often, in a shaded place with natural air movement",imgSrc:"/icons/alone.png"},{tip:"Avoid strenuous activities",imgSrc:"/icons/no-running.png"},{tip:"Check on people who may be vulnerable to the heat",imgSrc:"/icons/vulnerable_heat.png"}]}},ei=(0,n.useCallback)(e=>{let t=ee[e];if(!t)return null;let i={"Cool yourself":"/icons/ice-cubes.png","Use fans effectively":"/icons/Use_fans.webp","Keep your house cool":"/icons/house_cool.webp","Plan your day":"/icons/calendar.webp"};return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{marginBottom:"10px"},children:"Below is the list of proven scientific methods to reduce the effects of heat stress on the human's body."}),(0,l.jsx)(a.Z,{style:{width:"100%"},defaultActiveKey:"1",children:Object.entries(t).map((e,t)=>{let[n,s]=e;return(0,l.jsx)(a.Z.Panel,{header:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[(0,l.jsx)("img",{src:i[n],alt:n,width:35,height:35}),(0,l.jsx)("span",{style:{...X,flexGrow:1,marginLeft:"10px"},children:n})]},t),children:s.map((e,t)=>{let{tip:i,imgSrc:n}=e;return(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px",borderBottom:"1px solid #e8e8e8",paddingBottom:"10px"},children:[(0,l.jsx)("img",{src:n,alt:i,width:35,height:35}),(0,l.jsx)("span",{style:{flexGrow:1,marginLeft:"10px"},children:i})]},t)})},t+1)})})]})},[ev]),ea=(0,n.useMemo)(()=>{var e;return(0,l.jsx)(s.Z,{children:(0,l.jsx)(o.Z,{style:T.riskTipCol,children:null==N?void 0:null===(e=N.map)||void 0===e?void 0:e.call(N,e=>{let{key:t,icon:i,label:n}=e;return(0,l.jsxs)(s.Z,{style:T.generalTipRow,children:[(0,l.jsx)(el(),{src:ev+i,alt:"",width:35,height:35}),(0,l.jsx)("p",{children:null==Y?void 0:Y[n]})]},t)})})})},[N,Y]),es=(0,n.useMemo)(()=>{var e,t,i;let n=null===(e=Q(null==L?void 0:null===(t=L[0])||void 0===t?void 0:t.maxRiskValue))||void 0===e?void 0:e.riskLevel,a=ei(I);return E?(0,l.jsx)(C.Z,{}):(0,l.jsx)("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"".concat(A[I].backgroundColor)},children:U?(0,l.jsxs)("div",{children:[(0,l.jsxs)(o.Z,{children:[(0,l.jsxs)(s.Z,{span:3,style:T.currentRiskLabelRow,children:[(0,l.jsx)("p",{style:T.riskLevelHeader,children:Y.CurrentHssLabel}),(0,l.jsx)(en.Z,{content:a,child:(0,l.jsx)("p",{style:T.riskLevelLabel,children:null==Y?void 0:Y[I]})})]}),(0,l.jsx)(s.Z,{justify:"center",style:{marginTop:"10px"},children:(0,l.jsx)(r.ZP,{onClick:ew,style:{backgroundColor:"#005B8E",display:"inline-flex",alignItems:"center",color:"#fff"},type:"primary",icon:(0,l.jsx)("img",{src:"https://s2.loli.net/2023/10/22/9NxvWwmOjILct6g.png",style:{width:"20px",marginRight:"8px"}}),children:"Personalise HSS Risk"})})]}),ea,(0,l.jsxs)(s.Z,{style:{...T.currentRiskLabelMaxRow,marginBottom:"10px"},children:[(0,l.jsx)("p",{style:T.riskLevelHeaderTodayMax,children:Y.TodayMaxHssLabel}),(0,l.jsx)(en.Z,{content:a,child:(0,l.jsx)("p",{style:T.riskLevelTodayMaxLabel,children:Y[n]})}),(0,l.jsxs)("p",{style:T.riskLevelHeaderTodayMaxTime,children:[Y.AtTimeLabel," ",null==L?void 0:null===(i=L[0])||void 0===i?void 0:i.time,":00"]})]})]}):null})},[Y,L,U,I,ea,ei,Q]);(0,n.useMemo)(()=>E?(0,l.jsx)(C.Z,{}):(0,l.jsx)(er,{loading:E,data:w,currentRiskValue:v,maxLevelForecast:L}),[E,w,v,L]);let eo=(0,n.useMemo)(()=>(0,l.jsx)(eg,{}),[]);(0,n.useCallback)(()=>{h().push({pathname:"/SettingPage"})},[]);let ep=(0,n.useMemo)(()=>E?(0,l.jsx)(C.Z,{}):(0,l.jsxs)("div",{children:[(0,l.jsx)(s.Z,{}),(0,l.jsx)(et,{legendNow:S,legendMax:R,loading:E,portialLegendNow:Z,portialLegendMax:D})]}),[Y,E,S,R,Z,D]),ex=(0,n.useMemo)(()=>E?(0,l.jsx)(C.Z,{}):(0,l.jsx)("div",{children:(0,l.jsx)(a.Z,{style:T.collapseForecast,onChange:c,activeKey:t,children:(0,l.jsx)(ej,{header:(0,l.jsx)("div",{style:{padding:"0",fontSize:"20px !import",width:"100%",backgroundColor:"1"===t?"#E0F2F1":"transparent"},children:(0,l.jsx)("span",{children:"Detailed Recommendations"})}),style:{backgroundColor:"1"===t?"#E0F2F1":"transparent"},children:U?ei(I):null},"1")})}),[E,U,I,t]),eu=(0,n.useMemo)(()=>{var e;let t=Q(null==L?void 0:null===(e=L[0])||void 0===e?void 0:e.maxRiskValue),i=ei(t.riskLevel);return(0,l.jsxs)(s.Z,{gutter:[8,24],style:T.forcastRow,children:[(0,l.jsx)(o.Z,{xs:10,sm:6,md:6,lg:6,xl:6,children:Y.TodaysForecastLabel}),(0,l.jsx)(o.Z,{xs:8,sm:14,md:14,lg:14,xl:14,style:T.forcastLevelMainRow,children:(0,l.jsx)("div",{style:T.forcastLevelMainRowLabel,children:(0,l.jsx)("p",{children:Y.MaxRiskLabel})})}),(0,l.jsx)(o.Z,{xs:6,sm:4,md:4,lg:4,xl:4,style:{borderRadius:"5px",textAlign:"center",width:"140px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",...t.riskStyle},children:(0,l.jsx)(en.Z,{content:i,trigger:"click",child:(0,l.jsx)("div",{children:(0,l.jsx)("p",{children:Y[t.riskLevel]})})})})]})},[L,Y,Q,ei]),em=(0,n.useMemo)(()=>E?(0,l.jsx)(C.Z,{}):(0,l.jsx)("div",{children:(0,l.jsx)(a.Z,{style:T.collapseForecast,defaultActiveKey:["1"],children:(0,l.jsx)(ej,{header:eu,children:(0,l.jsx)(o.Z,{children:(0,l.jsx)(u.Z,{parameters:q,data:w[0],loading:E,chartType:b})})},"1")})}),[E,q,w,b,eu]),ek=(0,n.useCallback)((e,t)=>{console.log("259",e);let i=ei(t.maxRiskLevel);console.log("261",i);let n=A[null==t?void 0:t.maxRiskLevel];return(0,l.jsxs)(s.Z,{gutter:[8,24],style:T.forcastRow,children:[(0,l.jsx)(o.Z,{xs:10,sm:6,md:6,lg:6,xl:6,children:(null==e?void 0:e.label)+"-"+(null==e?void 0:e.date)}),(0,l.jsx)(o.Z,{xs:8,sm:14,md:14,lg:14,xl:14,style:T.forcastLevelMainRow,children:(0,l.jsx)("div",{style:T.forcastLevelMainRowLabel,children:(0,l.jsx)("p",{children:Y.MaxRiskLabel})})}),(0,l.jsx)(o.Z,{xs:6,sm:4,md:4,lg:4,xl:4,style:{borderRadius:"5px",textAlign:"center",width:"140px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",...n},children:(0,l.jsx)(en.Z,{content:i,trigger:"click",child:(0,l.jsx)("div",{children:(0,l.jsx)("p",{style:T.maxRiskLevelText,children:Y[null==t?void 0:t.maxRiskLevel]})})})})]})},[Y,ei]),eb=(0,n.useMemo)(()=>E?(0,l.jsx)(C.Z,{}):(0,l.jsx)("div",{children:k.map((e,t)=>{let i=ek(e,L.slice(1)[t]);return(0,l.jsx)(a.Z,{style:T.collapseForecast,children:(0,l.jsx)(ej,{header:i,children:(0,l.jsx)(o.Z,{children:(0,l.jsx)(u.Z,{maxLevel:L.slice(1)[t],parameters:q,data:w.slice(1)[t],loading:E,chartType:b})},t+"col")},t+"panel")},t+"collspa")})}),[E,k,L,q,w,b,ek]);(0,n.useEffect)(()=>{y&&q&&m(!0)},[y,q]);let eL=(0,n.useMemo)(()=>E?(0,l.jsx)(C.Z,{}):p?(0,l.jsx)(ef,{centerCoordinates:[q.latitude,q.longitude],markerCoordinates:[q.latitude,q.longitude],content:U?ei(I):null}):11,[E,p,q,U,ei]),eC=(0,n.useMemo)(()=>E?(0,l.jsx)(C.Z,{}):(0,l.jsx)("div",{children:(0,l.jsx)(a.Z,{style:T.collapseForecast,defaultActiveKey:["1"],children:(0,l.jsx)(ej,{header:eu,children:(0,l.jsx)(o.Z,{children:(0,l.jsx)(M,{parameters:q,dataForPublicDisplay:j,loading:E})})},"1")})}),[E,q,j,eu]),eS=(0,n.useMemo)(()=>(0,l.jsx)("div",{style:T.publicDisplayContainer,children:(0,l.jsxs)("div",{style:T.publicDisplayInnerContainer,children:[es,eC]})}),[es,eC]);return f?eS:(0,l.jsxs)("div",{style:T.container,children:[es,eo,ep,ex,em,eb,(0,l.jsx)("div",{ref:g,children:eL})]})};var eb=(0,c.withRouter)((0,p.O)(ek))},46982:function(e,t,i){var l=i(85893),n=i(36465),a=i.n(n),s=i(67294),o=i(11163),r=i(69400);(0,i(4480).cn)({key:"isModalOpenState",default:!1});let d={maxHeight:"80vh",maxWidth:"90vw",overflowY:"auto",overflowX:"hidden"},c=e=>{let{child:t,content:i}=e,[n,o]=(0,s.useState)(!1),c=e=>{o(!0),console.log("Showing modal"),e.stopPropagation()},h=e=>{o(!1),console.log("Closing modal"),e.stopPropagation()};return(0,l.jsxs)("div",{className:"jsx-28fdcef7af6d039c",children:[(0,l.jsx)(a(),{id:"28fdcef7af6d039c",children:".ant-modal-close-x{margin-right:-20px}.ant-modal-close-x:hover,.ant-modal-close-x:focus{background-color:transparent!important}.ant-modal-close:hover,.ant-modal-close:focus,.ant-modal-close .ant-modal-close-x:hover,.ant-modal-close .ant-modal-close-x:focus{background-color:transparent!important}"}),s.cloneElement(t,{onClick:c}),(0,l.jsx)("div",{onClick:e=>e.stopPropagation(),className:"jsx-28fdcef7af6d039c",children:(0,l.jsx)(r.Z,{footer:null,visible:n,onCancel:h,bodyStyle:d,getContainer:!1,children:i})})]})};t.Z=(0,o.withRouter)(c)},75884:function(e,t,i){i.d(t,{a:function(){return n},b:function(){return a}});var l=i(44866);i(88522),i(48562),l.Z.initializeApp({apiKey:"AIzaSyDGbDncnE8u9TuFfzOBWqYasgeDmKaSrSE",authDomain:"hss-application.firebaseapp.com",projectId:"hss-application",storageBucket:"hss-application.appspot.com",messagingSenderId:"124675882675",appId:"1:124675882675:web:7b389a2a209de8da2efac6",measurementId:"G-JT6FHMP7DN"});let n=e=>{l.Z.auth().onAuthStateChanged(function(t){t?e(!0,t):e(!1,null)})},a=async()=>new Promise((e,t)=>{l.Z.auth().onAuthStateChanged(t=>{t?e(t):e(void 0)},t)})},37744:function(e,t,i){i.d(t,{pN:function(){return n},xK:function(){return a}});var l=i(61800);function n(e,t){return new Promise(async(i,n)=>{try{let a=l.Fs.ref(e),s=await a.once("value"),o=s.val();(!o||o&&void 0===o.emailSubscription)&&a.child("emailSubscription").set(!0,e=>{e?(console.error("Error updating emailSubscription:",e),n(e)):console.log("emailSubscription updated successfully")}),a.update(t,e=>{e?(console.error("Error creating or updating data:",e),n(e)):i()})}catch(e){console.error("Error creating or updating data:",e),n(e)}})}function a(e){return new Promise((t,i)=>{try{let n=l.Fs.ref(e);n.once("value",e=>{let i=e.val();t(i)},e=>{console.error("Error reading data:",e),i(e)})}catch(e){console.error("Error reading data:",e),i(e)}})}},61800:function(e,t,i){i.d(t,{Fs:function(){return n},wm:function(){return a}});var l=i(44866);i(68542),i(46282),i(67058),i(79865),l.Z.initializeApp({apiKey:"AIzaSyDGbDncnE8u9TuFfzOBWqYasgeDmKaSrSE",authDomain:"hss-application.firebaseapp.com",projectId:"hss-application",storageBucket:"hss-application.appspot.com",messagingSenderId:"124675882675",appId:"1:124675882675:web:7b389a2a209de8da2efac6",measurementId:"G-JT6FHMP7DN"}),l.Z.storage(),l.Z.firestore();let n=l.Z.database(),a=e=>{{let t=l.Z.analytics();Object.entries(e).forEach(e=>{let[i,l]=e;t.logEvent("input_change",{field_name:i,field_value:l})})}}},75109:function(e,t,i){i.d(t,{ss:function(){return x}});var l=i(26743),n=i(6154),a=i(89174),s=i(75884),o=i(37744),r=i(53714),d=i(83005);let c={Extreme:{backgroundColor:"#BA2011",color:"white",fontWeight:"bold"},High:{backgroundColor:"#ED5711",color:"white",fontWeight:"bold"},Moderate:{backgroundColor:"#FFA600",color:"white",fontWeight:"bold"},Low:{backgroundColor:"#52B795",color:"white",fontWeight:"bold"}};function h(e){let t=1;if(e){let i=(0,l.f)(e,"w");if(i.every(e=>void 0===e))return t;let n=(e,t)=>void 0!==t?e*t:1*e;t=.85*i.reduce(n,1)}return t}async function p(){return new Promise((e,t)=>{(0,s.a)(async(t,i)=>{let n=(0,d.y)();if(t&&i&&i.emailVerified)try{let t=await (0,o.xK)("users/".concat(i.uid));console.log("dataFromFirebase",t);let n=(0,l.w)(t.settings),a=h(n);e(a)}catch(a){console.error("Operation failed:",a);let t=null;n&&(t=(0,l.w)(n));let i=h(t);e(i)}else{let t=null;n&&(t=(0,l.w)(n));let i=h(t);e(i)}})})}async function x(e,t,i){let l=1;try{l=await p()}catch(e){console.error("Error getting wDivider:",e),l=1}let s=(0,r.E)(e.latitude,e.longitude),o=await n.Z.get("https://api.open-meteo.com/v1/forecast",{params:{latitude:e.latitude,longitude:e.longitude,hourly:"temperature_2m,relativehumidity_2m,cloudcover,windspeed_10m",timezone:s,forecast_days:"4"}}),d=o.data.hourly,h=d.temperature_2m,x=d.windspeed_10m,u=d.relativehumidity_2m,m=[];for(let e=0;e<96;e++){let t=e%24,i=(0,a.M3)(h[e],h[e]+20,u[e],.3*x[e],100,1,1).wp/l;i>1&&(i=1),i=parseFloat(i.toFixed(2)),m.push({time:t,riskValue:i,divider:l})}let g=m.slice(0,25),y=[m.slice(t,24),m.slice(24,48),m.slice(48,72),m.slice(72,96)],f=m[t].riskValue,j=[];for(let e of y){let t=function(e){let t=e.reduce((e,t)=>t.riskValue>e.riskValue?t:e),i=t.riskValue,l="Extreme",n=c.Extreme;return i<.75&&(l="High",n=c.High),i<.5&&(l="Moderate",n=c.Moderate),i<.25&&(l="Low",n=c.Low),{maxRiskValue:i,maxRiskLevel:l,style:n,time:t.time}}(e);j.push(t)}let w=j[0].maxRiskValue,v=i.current,k=i.maxLabel,b=[],L=[],C=[],S=[];return f==w?L.push({riskValue:w,y:.5,label:k=i.currentMax}):(b.push({riskValue:f,y:.5,label:v}),L.push({riskValue:w,y:.5,label:k})),.1>Math.abs(f-w)?S.push({riskValue:w,y:.5,label:k=i.currentMax}):(C.push({riskValue:f,y:.5,label:v}),S.push({riskValue:w,y:.5,label:k})),{dataForPublicDisplay:g,currentRiskValue:f,data:y,maxLevelForecast:j,now:b,max:L,portialNow:C,portialMax:S}}},53714:function(e,t,i){i.d(t,{E:function(){return s},a:function(){return o}});var l=i(89128),n=i.n(l);function a(e,t,i,l){let n=(i-e)*(Math.PI/180),a=(l-t)*(Math.PI/180),s=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e*(Math.PI/180))*Math.cos(i*(Math.PI/180))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}function s(e,t){let i=n()(e,t);return i}async function o(e,t){try{if(null==e||null==t)return console.log("Invalid geo location"),null;let l=await i.e(4503).then(i.t.bind(i,34503,19)),n=function(e,t,i){if(!Array.isArray(i))throw Error("Data must be an array of location objects");let l=i[0],n=a(e,t,parseFloat(i[0].latitude),parseFloat(i[0].longitude));return i.forEach(i=>{let s=a(e,t,parseFloat(i.latitude),parseFloat(i.longitude));s<n&&(n=s,l=i)}),l}(e,t,l.default),s=n.suburb,o=n.state,r=n.postcode;return{suburb:s,state:o,postcode:r}}catch(e){return console.error("Error reverse geocoding:",e),null}}},83005:function(e,t,i){i.d(t,{y:function(){return l}});let l=()=>{let e=localStorage.getItem("allValue");e=e?JSON.parse(e):[];let t=null==e?void 0:e.find(e=>null==e?void 0:e.check);return t||null}},63137:function(e,t,i){async function l(){try{return(await i.e(1639).then(i.t.bind(i,31639,19))).default}catch(e){return console.error("Error:",e),null}}async function n(){try{return(await i.e(3952).then(i.t.bind(i,3952,19))).default}catch(e){return console.error("Error:",e),null}}async function a(){try{return(await i.e(9081).then(i.t.bind(i,9081,19))).default}catch(e){return console.error("Error:",e),null}}async function s(){try{return(await i.e(6668).then(i.t.bind(i,86668,19))).default}catch(e){return console.error("Error:",e),null}}i.d(t,{$6:function(){return s},cO:function(){return a},eP:function(){return n},m2:function(){return l}})},93096:function(e,t,i){i.d(t,{_:function(){return n}});var l=i(4480);let n=(0,l.cn)({key:"locationState",default:{latitude:-33.8,longitude:151.01,hourly:"temperature_2m,relativehumidity_2m,cloudcover,windspeed_10m",timezone:"Australia/Sydney"}})}}]);